/*! For license information please see main.15257827.js.LICENSE.txt */
(()=>{"use strict";var t={43:(t,e,n)=>{n(288)},288:(t,e)=>{var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,y={};function v(t,e,n){this.props=t,this.context=e,this.refs=y,this.updater=n||g}function w(){}function _(t,e,n){this.props=t,this.context=e,this.refs=y,this.updater=n||g}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},w.prototype=v.prototype;var E=_.prototype=new w;E.constructor=_,m(E,v.prototype),E.isPureReactComponent=!0;var I=Array.isArray;function b(){}var T={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function A(t,e,i){var r=i.ref;return{$$typeof:n,type:t,key:e,ref:void 0!==r?r:null,props:i}}function C(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var k=/\/+/g;function N(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(t){return e[t]})}(""+t.key):e.toString(36)}function R(t,e,r,s,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var c,l,h=!1;if(null===t)h=!0;else switch(a){case"bigint":case"string":case"number":h=!0;break;case"object":switch(t.$$typeof){case n:case i:h=!0;break;case d:return R((h=t._init)(t._payload),e,r,s,o)}}if(h)return o=o(t),h=""===s?"."+N(t,0):s,I(o)?(r="",null!=h&&(r=h.replace(k,"$&/")+"/"),R(o,e,r,"",function(t){return t})):null!=o&&(C(o)&&(c=o,l=r+(null==o.key||t&&t.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+h,o=A(c.type,l,c.props)),e.push(o)),1;h=0;var u,f=""===s?".":s+":";if(I(t))for(var g=0;g<t.length;g++)h+=R(s=t[g],e,r,a=f+N(s,g),o);else if("function"===typeof(g=null===(u=t)||"object"!==typeof u?null:"function"===typeof(u=p&&u[p]||u["@@iterator"])?u:null))for(t=g.call(t),g=0;!(s=t.next()).done;)h+=R(s=s.value,e,r,a=f+N(s,g++),o);else if("object"===a){if("function"===typeof t.then)return R(function(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch("string"===typeof t.status?t.then(b,b):(t.status="pending",t.then(function(e){"pending"===t.status&&(t.status="fulfilled",t.value=e)},function(e){"pending"===t.status&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}(t),e,r,s,o);throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return h}function O(t,e,n){if(null==t)return t;var i=[],r=0;return R(t,i,"","",function(t){return e.call(n,t,r++)}),i}function P(t){if(-1===t._status){var e=t._result;(e=e()).then(function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)},function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)}),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var D="function"===typeof reportError?reportError:function(t){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof t&&null!==t&&"string"===typeof t.message?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",t);console.error(t)}},579:(t,e,n)=>{n(799)},799:(t,e)=>{var n=Symbol.for("react.transitional.element");function i(t,e,i){var r=null;if(void 0!==i&&(r=""+i),void 0!==e.key&&(r=""+e.key),"key"in e)for(var s in i={},e)"key"!==s&&(i[s]=e[s]);else i=e;return e=i.ref,{$$typeof:n,type:t,key:r,ref:void 0!==e?e:null,props:i}}Symbol.for("react.fragment")}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}();n(43);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}function s(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){s(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}const c=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296===(64512&r)&&i+1<t.length&&56320===(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const e=t[r],s=r+1<t.length,o=s?t[r+1]:0,a=r+2<t.length,c=a?t[r+2]:0,l=e>>2,h=(3&e)<<4|o>>4;let u=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(u=64)),i.push(n[l],n[h],n[u],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(c(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const e=n[t.charAt(r++)],s=r<t.length?n[t.charAt(r)]:0;++r;const o=r<t.length?n[t.charAt(r)]:64;++r;const a=r<t.length?n[t.charAt(r)]:64;if(++r,null==e||null==s||null==o||null==a)throw new h;const c=e<<2|s>>4;if(i.push(c),64!==o){const t=s<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class h extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u=function(t){return function(t){const e=c(t);return l.encodeByteArray(e,!0)}(t).replace(/\./g,"")},d=function(t){try{return l.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function f(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const p=()=>{try{return f().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",PUBLIC_URL:"/taller-demo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&d(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(t))}},g=t=>{var e;return null===(e=p())||void 0===e||null===(e=e.emulatorHosts)||void 0===e?void 0:e[t]},m=()=>{var t;return null===(t=p())||void 0===t?void 0:t.config},y=t=>{var e;return null===(e=p())||void 0===e?void 0:e["_".concat(t)]};class v{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"===typeof t&&(this.promise.catch(()=>{}),1===t.length?t(e):t(e,n))}}}function w(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch(e){return!1}}async function _(t){return(await fetch(t,{credentials:"include"})).ok}const E={};let I=!1;function b(t,e){if("undefined"===typeof window||"undefined"===typeof document||!w(window.location.host)||E[t]===e||E[t]||I)return;function n(t){return"__firebase__banner__".concat(t)}E[t]=e;const i="__firebase__banner",r=function(){const t={prod:[],emulator:[]};for(const e of Object.keys(E))E[e]?t.emulator.push(e):t.prod.push(e);return t}().prod.length>0;function s(){const t=document.createElement("span");return t.style.cursor="pointer",t.style.marginLeft="16px",t.style.fontSize="24px",t.innerHTML=" &times;",t.onclick=()=>{I=!0,function(){const t=document.getElementById(i);t&&t.remove()}()},t}function o(){const t=function(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}(i),e=n("text"),o=document.getElementById(e)||document.createElement("span"),a=n("learnmore"),c=document.getElementById(a)||document.createElement("a"),l=n("preprendIcon"),h=document.getElementById(l)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(t.created){const e=t.element;!function(t){t.style.display="flex",t.style.background="#7faaf0",t.style.position="fixed",t.style.bottom="5px",t.style.left="5px",t.style.padding=".5em",t.style.borderRadius="5px",t.style.alignItems="center"}(e),function(t,e){t.setAttribute("id",e),t.innerText="Learn more",t.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",t.setAttribute("target","__blank"),t.style.paddingLeft="5px",t.style.textDecoration="underline"}(c,a);const n=s();!function(t,e){t.setAttribute("width","24"),t.setAttribute("id",e),t.setAttribute("height","24"),t.setAttribute("viewBox","0 0 24 24"),t.setAttribute("fill","none"),t.style.marginLeft="-6px"}(h,l),e.append(h,o,c,n),document.body.appendChild(e)}r?(o.innerText="Preview backend disconnected.",h.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(h.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",e)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function T(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function S(){var t;const e=null===(t=p())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(i){return!1}}function A(){return!S()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function C(){try{return"object"===typeof indexedDB}catch(t){return!1}}class k extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,k.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,N.prototype.create)}}class N{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t){const e=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(t),i=this.errors[t],r=i?function(t,e){return t.replace(R,(t,n)=>{const i=e[n];return null!=i?String(i):"<".concat(n,"?>")})}(i,e):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new k(n,s,e)}}const R=/\{\$([^}]+)}/g;function O(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(P(n)&&P(s)){if(!O(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function P(t){return null!==t&&"object"===typeof t}function D(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function L(t){const e={};return t.replace(/^\?/,"").split("&").forEach(t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}}),e}function M(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class x{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(t=>{this.error(t)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=function(t,e){if("object"!==typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"===typeof t[n])return!0;return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=V),void 0===i.error&&(i.error=V),void 0===i.complete&&(i.complete=V);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}}),this.observers.push(i),r}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V(){}function U(t){return t&&t._delegate?t._delegate:t}class F{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const j="[DEFAULT]";class B{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new v;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),i=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:j})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:i});n.resolve(t)}catch(e){}}}}clearInstance(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...t.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;return this.instances.has(t)}getOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;return this.instancesOptions.get(t)||{}}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(i){}}getOrInitializeService(t){let{instanceIdentifier:e,options:n={}}=t,i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===j?void 0:r),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(s){}var r;return i||null}normalizeInstanceIdentifier(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;return this.component?this.component.multipleInstances?t:j:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class H{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component ".concat(t.name," has already been registered with ").concat(this.name));e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new B(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const q=[];var z;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(z||(z={}));const K={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},W=z.INFO,G={[z.DEBUG]:"log",[z.VERBOSE]:"log",[z.INFO]:"info",[z.WARN]:"warn",[z.ERROR]:"error"},J=function(t,e){if(e<t.logLevel)return;const n=(new Date).toISOString(),i=G[e];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"));for(var r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];console[i]("[".concat(n,"]  ").concat(t.name,":"),...s)};class Q{constructor(t){this.name=t,this._logLevel=W,this._logHandler=J,this._userLogHandler=null,q.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in z))throw new TypeError('Invalid value "'.concat(t,'" assigned to `logLevel`'));this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?K[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,z.DEBUG,...e),this._logHandler(this,z.DEBUG,...e)}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,z.VERBOSE,...e),this._logHandler(this,z.VERBOSE,...e)}info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,z.INFO,...e),this._logHandler(this,z.INFO,...e)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,z.WARN,...e),this._logHandler(this,z.WARN,...e)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,z.ERROR,...e),this._logHandler(this,z.ERROR,...e)}}let X,Y;const $=new WeakMap,Z=new WeakMap,tt=new WeakMap,et=new WeakMap,nt=new WeakMap;let it={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Z.get(t);if("objectStoreNames"===e)return t.objectStoreNames||tt.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ot(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function rt(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(at(this),n),ot($.get(this))}:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return ot(t.apply(at(this),n))}:function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=t.call(at(this),e,...i);return tt.set(s,e.sort?e.sort():[e]),ot(s)}}function st(t){return"function"===typeof t?rt(t):(t instanceof IDBTransaction&&function(t){if(Z.has(t))return;const e=new Promise((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)});Z.set(t,e)}(t),e=t,(X||(X=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(t=>e instanceof t)?new Proxy(t,it):t);var e}function ot(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(ot(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)});return e.then(e=>{e instanceof IDBCursor&&$.set(e,t)}).catch(()=>{}),nt.set(e,t),e}(t);if(et.has(t))return et.get(t);const e=st(t);return e!==t&&(et.set(t,e),nt.set(e,t)),e}const at=t=>nt.get(t);const ct=["get","getKey","getAll","getAllKeys","count"],lt=["put","add","delete","clear"],ht=new Map;function ut(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(ht.get(e))return ht.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=lt.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!ct.includes(n))return;const s=async function(t){const e=this.transaction(t,r?"readwrite":"readonly");let s=e.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return i&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),r&&e.done]))[0]};return ht.set(e,s),s}it=(t=>a(a({},t),{},{get:(e,n,i)=>ut(e,n)||t.get(e,n,i),has:(e,n)=>!!ut(e,n)||t.has(e,n)}))(it);class dt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){const e=t.getImmediate();return"".concat(e.library,"/").concat(e.version)}return null}).filter(t=>t).join(" ")}}const ft="@firebase/app",pt="0.14.6",gt=new Q("@firebase/app"),mt="@firebase/app-compat",yt="@firebase/analytics-compat",vt="@firebase/analytics",wt="@firebase/app-check-compat",_t="@firebase/app-check",Et="@firebase/auth",It="@firebase/auth-compat",bt="@firebase/database",Tt="@firebase/data-connect",St="@firebase/database-compat",At="@firebase/functions",Ct="@firebase/functions-compat",kt="@firebase/installations",Nt="@firebase/installations-compat",Rt="@firebase/messaging",Ot="@firebase/messaging-compat",Pt="@firebase/performance",Dt="@firebase/performance-compat",Lt="@firebase/remote-config",Mt="@firebase/remote-config-compat",xt="@firebase/storage",Vt="@firebase/storage-compat",Ut="@firebase/firestore",Ft="@firebase/ai",jt="@firebase/firestore-compat",Bt="firebase",Ht="[DEFAULT]",qt={[ft]:"fire-core",[mt]:"fire-core-compat",[vt]:"fire-analytics",[yt]:"fire-analytics-compat",[_t]:"fire-app-check",[wt]:"fire-app-check-compat",[Et]:"fire-auth",[It]:"fire-auth-compat",[bt]:"fire-rtdb",[Tt]:"fire-data-connect",[St]:"fire-rtdb-compat",[At]:"fire-fn",[Ct]:"fire-fn-compat",[kt]:"fire-iid",[Nt]:"fire-iid-compat",[Rt]:"fire-fcm",[Ot]:"fire-fcm-compat",[Pt]:"fire-perf",[Dt]:"fire-perf-compat",[Lt]:"fire-rc",[Mt]:"fire-rc-compat",[xt]:"fire-gcs",[Vt]:"fire-gcs-compat",[Ut]:"fire-fst",[jt]:"fire-fst-compat",[Ft]:"fire-vertex","fire-js":"fire-js",[Bt]:"fire-js-all"},zt=new Map,Kt=new Map,Wt=new Map;function Gt(t,e){try{t.container.addComponent(e)}catch(n){gt.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),n)}}function Jt(t){const e=t.name;if(Wt.has(e))return gt.debug("There were multiple attempts to register component ".concat(e,".")),!1;Wt.set(e,t);for(const n of zt.values())Gt(n,t);for(const n of Kt.values())Gt(n,t);return!0}function Qt(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xt(t){return null!==t&&void 0!==t&&void 0!==t.settings}const Yt=new N("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class $t{constructor(t,e,n){this._isDeleted=!1,this._options=a({},t),this._config=a({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new F("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Yt.create("app-deleted",{appName:this._name})}}const Zt="12.6.0";function te(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;if("object"!==typeof e){e={name:e}}const i=a({name:Ht,automaticDataCollectionEnabled:!0},e),r=i.name;if("string"!==typeof r||!r)throw Yt.create("bad-app-name",{appName:String(r)});if(n||(n=m()),!n)throw Yt.create("no-options");const s=zt.get(r);if(s){if(O(n,s.options)&&O(i,s.config))return s;throw Yt.create("duplicate-app",{appName:r})}const o=new H(r);for(const a of Wt.values())o.addComponent(a);const c=new $t(n,i,o);return zt.set(r,c),c}function ee(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht;const e=zt.get(t);if(!e&&t===Ht&&m())return te();if(!e)throw Yt.create("no-app",{appName:t});return e}function ne(t,e,n){var i;let r=null!==(i=qt[t])&&void 0!==i?i:t;n&&(r+="-".concat(n));const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=['Unable to register library "'.concat(r,'" with version "').concat(e,'":')];return s&&t.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),s&&o&&t.push("and"),o&&t.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),void gt.warn(t.join(" "))}Jt(new F("".concat(r,"-version"),()=>({library:r,version:e}),"VERSION"))}const ie="firebase-heartbeat-store";let re=null;function se(){return re||(re=function(t,e){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(t,e),a=ot(o);return i&&o.addEventListener("upgradeneeded",t=>{i(ot(o.result),t.oldVersion,t.newVersion,ot(o.transaction),t)}),n&&o.addEventListener("blocked",t=>n(t.oldVersion,t.newVersion,t)),a.then(t=>{s&&t.addEventListener("close",()=>s()),r&&t.addEventListener("versionchange",t=>r(t.oldVersion,t.newVersion,t))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(ie)}catch(n){console.warn(n)}}}).catch(t=>{throw Yt.create("idb-open",{originalErrorMessage:t.message})})),re}async function oe(t,e){try{const n=(await se()).transaction(ie,"readwrite"),i=n.objectStore(ie);await i.put(e,ae(t)),await n.done}catch(n){if(n instanceof k)gt.warn(n.message);else{const t=Yt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});gt.warn(t.message)}}}function ae(t){return"".concat(t.name,"!").concat(t.options.appId)}class ce{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new he(e),this._heartbeatsCachePromise=this._storage.read().then(t=>(this._heartbeatsCache=t,t))}async triggerHeartbeat(){try{var t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=le();var e;if(null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(t=>t.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>30){const t=function(t){if(0===t.length)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(t,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){gt.warn(n)}}async getHeartbeatsHeader(){try{var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=le(),{heartbeatsToSend:n,unsentEntries:i}=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=t.slice();for(const r of t){const t=n.find(t=>t.agent===r.agent);if(t){if(t.dates.push(r.date),ue(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ue(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=u(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return gt.warn(e),""}}}function le(){return(new Date).toISOString().substring(0,10)}class he{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!C()&&new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await se()).transaction(ie),n=await e.objectStore(ie).get(ae(t));return await e.done,n}catch(e){if(e instanceof k)gt.warn(e.message);else{const t=Yt.create("idb-get",{originalErrorMessage:null===e||void 0===e?void 0:e.message});gt.warn(t.message)}}}(this.app);return null!==t&&void 0!==t&&t.heartbeats?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){var e;const n=await this.read();return oe(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){if(await this._canUseIndexedDBPromise){var e;const n=await this.read();return oe(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function ue(t){return u(JSON.stringify({version:2,heartbeats:t})).length}var de;de="",Jt(new F("platform-logger",t=>new dt(t),"PRIVATE")),Jt(new F("heartbeat",t=>new ce(t),"PRIVATE")),ne(ft,pt,de),ne(ft,pt,"esm2020"),ne("fire-js","");function fe(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}ne("firebase","12.6.0","app");const pe=["providerId"],ge=["uid","auth","stsTokenManager"],me=["providerId","signInMethod"];function ye(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ve=ye,we=new N("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_e=new Q("@firebase/auth");function Ee(t){if(_e.logLevel<=z.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];_e.error("Auth (".concat(Zt,"): ").concat(t),...n)}}function Ie(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];throw Ae(t,...n)}function be(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Ae(t,...n)}function Te(t,e,n){const i=a(a({},ve()),{},{[e]:n});return new N("auth","Firebase",i).create(e,{appName:t.name})}function Se(t){return Te(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ae(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if("string"!==typeof t){const e=n[0],i=[...n.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(e,...i)}return we.create(t,...n)}function Ce(t,e){if(!t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw Ae(e,...i)}}function ke(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ee(e),new Error(e)}function Ne(t,e){t||ke(e)}function Re(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function Oe(){return"http:"===Pe()||"https:"===Pe()}function Pe(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function De(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Oe()||function(){const t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class Le{constructor(t,e){this.shortDelay=t,this.longDelay=e,Ne(e>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(T())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return De()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Me(t,e){Ne(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?"".concat(n).concat(e.startsWith("/")?e.slice(1):e):n}class xe{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void ke("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void ke("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void ke("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ve={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ue=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Fe=new Le(3e4,6e4);function je(t,e){return t.tenantId&&!e.tenantId?a(a({},e),{},{tenantId:t.tenantId}):e}async function Be(t,e,n,i){return He(t,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let r={},s={};i&&("GET"===e?s=i:r={body:JSON.stringify(i)});const o=D(a({key:t.config.apiKey},s)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const l=a({method:e,headers:c},r);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&w(t.emulatorConfig.host)&&(l.credentials="include"),xe.fetch()(await ze(t,t.config.apiHost,n,o),l)})}async function He(t,e,n){t._canInitEmulator=!1;const i=a(a({},Ve),e);try{const e=new We(t),r=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw Ge(t,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const e=r.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ge(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Ge(t,"email-already-in-use",s);if("USER_DISABLED"===n)throw Ge(t,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Te(t,a,o);Ie(t,a)}}catch(r){if(r instanceof k)throw r;Ie(t,"network-request-failed",{message:String(r)})}}async function qe(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Be(t,e,n,i,r);return"mfaPendingCredential"in s&&Ie(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function ze(t,e,n,i){const r="".concat(e).concat(n,"?").concat(i),s=t,o=s.config.emulator?Me(t.config,r):"".concat(t.config.apiScheme,"://").concat(r);if(Ue.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function Ke(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class We{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((t,e)=>{this.timer=setTimeout(()=>e(be(this.auth,"network-request-failed")),Fe.get())})}}function Ge(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=be(t,e,i);return r.customData._tokenResponse=n,r}function Je(t){return void 0!==t&&void 0!==t.enterprise}class Qe{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return Ke(e.enforcementState);return null}isProviderEnabled(t){return"ENFORCE"===this.getProviderEnforcementState(t)||"AUDIT"===this.getProviderEnforcementState(t)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Xe(t,e){return Be(t,"GET","/v2/recaptchaConfig",je(t,e))}async function Ye(t,e){return Be(t,"POST","/v1/accounts:lookup",e)}function $e(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function Ze(t){return 1e3*Number(t)}function tn(t){const[e,n,i]=t.split(".");if(void 0===e||void 0===n||void 0===i)return Ee("JWT malformed, contained fewer than 3 sections"),null;try{const t=d(n);return t?JSON.parse(t):(Ee("Failed to decode base64 JWT payload"),null)}catch(r){return Ee("Caught error parsing JWT payload as JSON",null===r||void 0===r?void 0:r.toString()),null}}function en(t){const e=tn(t);return Ce(e,"internal-error"),Ce("undefined"!==typeof e.exp,"internal-error"),Ce("undefined"!==typeof e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}async function nn(t,e){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return e;try{return await e}catch(n){throw n instanceof k&&function(t){let{code:e}=t;return e==="auth/".concat("user-disabled")||e==="auth/".concat("user-token-expired")}(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}class rn{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{var e;this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void((null===t||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class sn{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=$e(this.lastLoginAt),this.creationTime=$e(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function on(t){var e;const n=t.auth,i=await t.getIdToken(),r=await nn(t,Ye(n,{idToken:i}));Ce(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?an(s.providerUserInfo):[],a=(c=t.providerData,l=o,[...c.filter(t=>!l.some(e=>e.providerId===t.providerId)),...l]);var c,l;const h=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(null!==a&&void 0!==a&&a.length),d=!!h&&u,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new sn(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}function an(t){return t.map(t=>{let{providerId:e}=t,n=fe(t,pe);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class cn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ce(t.idToken,"internal-error"),Ce("undefined"!==typeof t.idToken,"internal-error"),Ce("undefined"!==typeof t.refreshToken,"internal-error");const e="expiresIn"in t&&"undefined"!==typeof t.expiresIn?Number(t.expiresIn):en(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Ce(0!==t.length,"internal-error");const e=en(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Ce(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(t,e){const n=await He(t,{},async()=>{const n=D({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,s=await ze(t,i,"/v1/token","key=".concat(r)),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:o,body:n};return t.emulatorConfig&&w(t.emulatorConfig.host)&&(a.credentials="include"),xe.fetch()(s,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,s=new cn;return n&&(Ce("string"===typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(Ce("string"===typeof i,"internal-error",{appName:t}),s.accessToken=i),r&&(Ce("number"===typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new cn,this.toJSON())}_performRefresh(){return ke("not implemented")}}function ln(t,e){Ce("string"===typeof t||"undefined"===typeof t,"internal-error",{appName:e})}class hn{constructor(t){let{uid:e,auth:n,stsTokenManager:i}=t,r=fe(t,ge);this.providerId="firebase",this.proactiveRefresh=new rn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new sn(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await nn(this,this.stsTokenManager.getToken(this.auth,t));return Ce(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return async function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=U(t),i=await n.getIdToken(e),r=tn(i);Ce(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"===typeof r.firebase?r.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:$e(Ze(r.auth_time)),issuedAtTime:$e(Ze(r.iat)),expirationTime:$e(Ze(r.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,t)}reload(){return async function(t){const e=U(t);await on(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}(this)}_assign(t){this!==t&&(Ce(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(t=>a({},t)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new hn(a(a({},this),{},{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await on(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xt(this.auth.app))return Promise.reject(Se(this.auth));const t=await this.getIdToken();return await nn(this,async function(t,e){return Be(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return a(a({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>a({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,s,o,c,l,h;const u=null!==(n=e.displayName)&&void 0!==n?n:void 0,d=null!==(i=e.email)&&void 0!==i?i:void 0,f=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=e.photoURL)&&void 0!==s?s:void 0,g=null!==(o=e.tenantId)&&void 0!==o?o:void 0,m=null!==(c=e._redirectEventId)&&void 0!==c?c:void 0,y=null!==(l=e.createdAt)&&void 0!==l?l:void 0,v=null!==(h=e.lastLoginAt)&&void 0!==h?h:void 0,{uid:w,emailVerified:_,isAnonymous:E,providerData:I,stsTokenManager:b}=e;Ce(w&&b,t,"internal-error");const T=cn.fromJSON(this.name,b);Ce("string"===typeof w,t,"internal-error"),ln(u,t.name),ln(d,t.name),Ce("boolean"===typeof _,t,"internal-error"),Ce("boolean"===typeof E,t,"internal-error"),ln(f,t.name),ln(p,t.name),ln(g,t.name),ln(m,t.name),ln(y,t.name),ln(v,t.name);const S=new hn({uid:w,auth:t,email:d,emailVerified:_,displayName:u,isAnonymous:E,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:T,createdAt:y,lastLoginAt:v});return I&&Array.isArray(I)&&(S.providerData=I.map(t=>a({},t))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new cn;i.updateFromServerResponse(e);const r=new hn({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await on(r),r}static async _fromGetAccountInfoResponse(t,e,n){const i=e.users[0];Ce(void 0!==i.localId,"internal-error");const r=void 0!==i.providerUserInfo?an(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(null!==r&&void 0!==r&&r.length),o=new cn;o.updateFromIdToken(n);const a=new hn({uid:i.localId,auth:t,stsTokenManager:o,isAnonymous:s}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new sn(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(null!==r&&void 0!==r&&r.length)};return Object.assign(a,c),a}}const un=new Map;function dn(t){Ne(t instanceof Function,"Expected a class definition");let e=un.get(t);return e?(Ne(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,un.set(t,e),e)}class fn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}fn.type="NONE";const pn=fn;function gn(t,e,n){return"firebase".concat(":",t,":").concat(e,":").concat(n)}class mn{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=gn(this.userKey,i.apiKey,r),this.fullPersistenceKey=gn("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if("string"===typeof t){const e=await Ye(this.auth,{idToken:t}).catch(()=>{});return e?hn._fromGetAccountInfoResponse(this.auth,e,t):null}return hn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!e.length)return new mn(dn(pn),t,n);const i=(await Promise.all(e.map(async t=>{if(await t._isAvailable())return t}))).filter(t=>t);let r=i[0]||dn(pn);const s=gn(n,t.config.apiKey,t.name);let o=null;for(const l of e)try{const e=await l._get(s);if(e){let n;if("string"===typeof e){const i=await Ye(t,{idToken:e}).catch(()=>{});if(!i)break;n=await hn._fromGetAccountInfoResponse(t,i,e)}else n=hn._fromJSON(t,e);l!==r&&(o=n),r=l;break}}catch(c){}const a=i.filter(t=>t._shouldAllowMigration);return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(e.map(async t=>{if(t!==r)try{await t._remove(s)}catch(e){}})),new mn(r,t,n)):new mn(r,t,n)}}function yn(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(En(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vn(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bn(e))return"Blackberry";if(Tn(e))return"Webos";if(wn(e))return"Safari";if((e.includes("chrome/")||_n(e))&&!e.includes("edge/"))return"Chrome";if(In(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function vn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/firefox\//i.test(t)}function wn(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:T()).toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function _n(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/crios\//i.test(t)}function En(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/iemobile/i.test(t)}function In(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/android/i.test(t)}function bn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/blackberry/i.test(t)}function Tn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/webos/i.test(t)}function Sn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function An(){return function(){const t=T();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}function Cn(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return Sn(t)||In(t)||Tn(t)||bn(t)||/windows phone/i.test(t)||En(t)}function kn(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(t){case"Browser":e=yn(T());break;case"Worker":e="".concat(yn(T()),"-").concat(t);break;default:e=t}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(e,"/","JsCore","/").concat(Zt,"/").concat(i)}class Nn{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise((n,i)=>{try{n(t(e))}catch(r){i(r)}});n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(n){e.reverse();for(const t of e)try{t()}catch(i){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Rn{constructor(t){var e,n,i,r;const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(e=s.minPasswordLength)&&void 0!==e?e:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(i=t.allowedNonAlphanumericCharacters)||void 0===i?void 0:i.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(r=t.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,n,i,r,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,a),this.validatePasswordCharacterOptions(t,a),a.isValid&&(a.isValid=null===(e=a.meetsMinPasswordLength)||void 0===e||e),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(t,e){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){let n;this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);for(let i=0;i<t.length;i++)n=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}class On{constructor(t,e,n,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dn(this),this.idTokenSubscription=new Dn(this),this.beforeStateQueue=new Nn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=we,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(t=>this._resolvePersistenceManagerAvailable=t)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=dn(e)),this._initializationPromise=this.queue(async()=>{var n,i,r;if(!this._deleted&&(this.persistenceManager=await mn.create(this,t),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(i=this._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUserFromIdToken(t){try{const e=await Ye(this,{idToken:t}),n=await hn._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Xt(this.app)){const t=this.app.settings.authIdToken;return t?new Promise(e=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(t).then(e,e))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let n=e,i=!1;if(t&&this.config.authDomain){var r,s;await this.getOrInitRedirectPersistenceManager();const e=null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId,o=null===(s=n)||void 0===s?void 0:s._redirectEventId,a=await this.tryRedirectSignIn(t);e&&e!==o||null===a||void 0===a||!a.user||(n=a.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(n){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await on(t)}catch(e){if((null===e||void 0===e?void 0:e.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Xt(this.app))return Promise.reject(Se(this));const e=t?U(t):null;return e&&Ce(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return t&&Ce(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Xt(this.app)?Promise.reject(Se(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Xt(this.app)?Promise.reject(Se(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(dn(t))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await async function(t){return Be(t,"GET","/v2/passwordPolicy",je(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),e=new Rn(t);null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new N("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(e.tenantId=this.tenantId),await async function(t,e){return Be(t,"POST","/v2/accounts:revokeToken",je(t,e))}(this,e)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&dn(t)||this._popupRedirectResolver;Ce(e,this,"argument-error"),this.redirectPersistenceManager=await mn.create(this,[dn(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"===typeof e?e:e.next.bind(e);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(o,this,"internal-error"),o.then(()=>{s||r(this.currentUser)}),"function"===typeof e){const r=t.addObserver(e,n,i);return()=>{s=!0,r()}}{const n=t.addObserver(e);return()=>{s=!0,n()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=kn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Xt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await(null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken());return null!==e&&void 0!==e&&e.error&&function(t){if(_e.logLevel<=z.WARN){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];_e.warn("Auth (".concat(Zt,"): ").concat(t),...n)}}("Error while retrieving App Check token: ".concat(e.error)),null===e||void 0===e?void 0:e.token}}function Pn(t){return U(t)}class Dn{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new x(t,e);return n.subscribe.bind(n)}(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ln={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Mn(t){return Ln.loadJS(t)}function xn(t){return"__".concat(t).concat(Math.floor(1e6*Math.random()))}class Vn{constructor(){this.enterprise=new Un}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class Un{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const Fn="NO_RECAPTCHA";class jn{constructor(t){this.type="recaptcha-enterprise",this.auth=Pn(t)}async verify(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(e,n,i){const r=window.grecaptcha;Je(r)?r.enterprise.ready(()=>{r.enterprise.execute(e,{action:t}).then(t=>{n(t)}).catch(()=>{n(Fn)})}):i(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Vn).execute("siteKey",{action:"verify"})}return new Promise((t,i)=>{(async function(t){if(!e){if(null==t.tenantId&&null!=t._agentRecaptchaConfig)return t._agentRecaptchaConfig.siteKey;if(null!=t.tenantId&&void 0!==t._tenantRecaptchaConfigs[t.tenantId])return t._tenantRecaptchaConfigs[t.tenantId].siteKey}return new Promise(async(e,n)=>{Xe(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(i=>{if(void 0!==i.recaptchaKey){const n=new Qe(i);return null==t.tenantId?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,e(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(t=>{n(t)})})})(this.auth).then(r=>{if(!e&&Je(window.grecaptcha))n(r,t,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let e=Ln.recaptchaEnterpriseScript;0!==e.length&&(e+=r),Mn(e).then(()=>{n(r,t,i)}).catch(t=>{i(t)})}}).catch(t=>{i(t)})})}}async function Bn(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new jn(t);let o;if(r)o=Fn;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const c=a({},e);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in c){const t=c.phoneEnrollmentInfo.phoneNumber,e=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:t,recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const t=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Hn(t,e,n,i,r){if("EMAIL_PASSWORD_PROVIDER"===r){var s;if(null!==(s=t._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Bn(t,e,n,"getOobCode"===n);return i(t,r)}return i(t,e).catch(async r=>{if(r.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const r=await Bn(t,e,n,"getOobCode"===n);return i(t,r)}return Promise.reject(r)})}if("PHONE_PROVIDER"===r){var o;if(null!==(o=t._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("PHONE_PROVIDER")){const r=await Bn(t,e,n);return i(t,r).catch(async r=>{var s;if("AUDIT"===(null===(s=t._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(r.code==="auth/".concat("missing-recaptcha-token")||r.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const r=await Bn(t,e,n,!1,!0);return i(t,r)}return Promise.reject(r)})}{const r=await Bn(t,e,n,!1,!0);return i(t,r)}}return Promise.reject(r+" provider is not supported.")}async function qn(t){const e=Pn(t),n=await Xe(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new Qe(n);if(null==e.tenantId?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()){new jn(e).verify()}}function zn(t,e,n){const i=Pn(t);Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!(null===n||void 0===n||!n.disableWarnings),s=Kn(e),{host:o,port:a}=function(t){const e=Kn(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const t=r[1];return{host:t,port:Wn(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:Wn(e)}}}(e),c=null===a?"":":".concat(a),l={url:"".concat(s,"//").concat(o).concat(c,"/")},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator)return Ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),void Ce(O(l,i.config.emulator)&&O(h,i.emulatorConfig),i,"emulator-config-failed");i.config.emulator=l,i.emulatorConfig=h,i.settings.appVerificationDisabledForTesting=!0,w(o)?(_("".concat(s,"//").concat(o).concat(c)),b("Auth",!0)):r||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}function Kn(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Wn(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class Gn{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return ke("not implemented")}_getIdTokenResponse(t){return ke("not implemented")}_linkToIdToken(t,e){return ke("not implemented")}_getReauthenticationResolver(t){return ke("not implemented")}}async function Jn(t,e){return Be(t,"POST","/v1/accounts:signUp",e)}async function Qn(t,e){return qe(t,"POST","/v1/accounts:signInWithPassword",je(t,e))}class Xn extends Gn{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new Xn(t,e,"password")}static _fromEmailAndCode(t,e){return new Xn(t,e,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t;if(null!==e&&void 0!==e&&e.email&&null!==e&&void 0!==e&&e.password){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return Hn(t,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Qn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(t,e){return qe(t,"POST","/v1/accounts:signInWithEmailLink",je(t,e))}(t,{email:this._email,oobCode:this._password});default:Ie(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return Hn(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Jn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(t,e){return qe(t,"POST","/v1/accounts:signInWithEmailLink",je(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:Ie(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Yn(t,e){return qe(t,"POST","/v1/accounts:signInWithIdp",je(t,e))}class $n extends Gn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new $n(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Ie("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=fe(e,me);if(!n||!i)return null;const s=new $n(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(t){return Yn(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Yn(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Yn(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=D(e)}return t}}async function Zn(t,e){return Be(t,"POST","/v1/accounts:sendVerificationCode",je(t,e))}const ti={USER_NOT_FOUND:"user-not-found"};class ei extends Gn{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new ei({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new ei({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return qe(t,"POST","/v1/accounts:signInWithPhoneNumber",je(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await qe(t,"POST","/v1/accounts:signInWithPhoneNumber",je(t,e));if(n.temporaryProof)throw Ge(t,"account-exists-with-different-credential",n);return n}(t,a({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return qe(t,"POST","/v1/accounts:signInWithPhoneNumber",je(t,a(a({},e),{},{operation:"REAUTH"})),ti)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"===typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}=t;return n||e||i||r?new ei({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class ni{constructor(t){var e,n,i,r,s,o;const a=L(M(t)),c=null!==(e=a.apiKey)&&void 0!==e?e:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,h=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);Ce(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=L(M(t)).link,n=e?L(M(e)).deep_link_id:null,i=L(M(t)).deep_link_id;return(i?L(M(i)).link:null)||i||n||e||t}(t);try{return new ni(e)}catch(n){return null}}}class ii{constructor(){this.providerId=ii.PROVIDER_ID}static credential(t,e){return Xn._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=ni.parseLink(e);return Ce(n,"argument-error"),Xn._fromEmailAndCode(t,n.code,n.tenantId)}}ii.PROVIDER_ID="password",ii.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ii.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ri{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class si extends ri{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class oi extends si{constructor(){super("facebook.com")}static credential(t){return $n._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return oi.credentialFromTaggedObject(t)}static credentialFromError(t){return oi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch(n){return null}}}oi.FACEBOOK_SIGN_IN_METHOD="facebook.com",oi.PROVIDER_ID="facebook.com";class ai extends si{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return $n._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return ai.credentialFromTaggedObject(t)}static credentialFromError(t){return ai.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ai.credential(n,i)}catch(r){return null}}}ai.GOOGLE_SIGN_IN_METHOD="google.com",ai.PROVIDER_ID="google.com";class ci extends si{constructor(){super("github.com")}static credential(t){return $n._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ci.credentialFromTaggedObject(t)}static credentialFromError(t){return ci.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch(n){return null}}}ci.GITHUB_SIGN_IN_METHOD="github.com",ci.PROVIDER_ID="github.com";class li extends si{constructor(){super("twitter.com")}static credential(t,e){return $n._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return li.credentialFromTaggedObject(t)}static credentialFromError(t){return li.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return li.credential(n,i)}catch(r){return null}}}li.TWITTER_SIGN_IN_METHOD="twitter.com",li.PROVIDER_ID="twitter.com";class hi{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await hn._fromIdTokenResponse(t,n,i),s=ui(n);return new hi({user:r,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=ui(n);return new hi({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function ui(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class di extends k{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,di.prototype),this.customData={appName:t.name,tenantId:null!==(r=t.tenantId)&&void 0!==r?r:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new di(t,e,n,i)}}function fi(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw di._fromErrorAndOperation(t,n,e,i);throw n})}async function pi(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await nn(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return hi._forOperation(t,"link",i)}async function gi(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=t;if(Xt(i.app))return Promise.reject(Se(i));const r="reauthenticate";try{const s=await nn(t,fi(i,r,e,t),n);Ce(s.idToken,i,"internal-error");const o=tn(s.idToken);Ce(o,i,"internal-error");const{sub:a}=o;return Ce(t.uid===a,i,"user-mismatch"),hi._forOperation(t,r,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&Ie(i,"user-mismatch"),s}}async function mi(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Xt(t.app))return Promise.reject(Se(t));const i="signIn",r=await fi(t,i,e),s=await hi._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}function yi(t,e){return Be(t,"POST","/v2/accounts/mfaEnrollment:start",je(t,e))}new WeakMap;const vi="__sak";class wi{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(vi,"1"),this.storage.removeItem(vi),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class _i extends wi{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Cn(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t.key)return void this.forAllChangedKeys((t,e,n)=>{this.notifyListeners(t,n)});const n=t.key;e?this.detachListener():this.stopPolling();const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);An()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,10):i()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}_i.type="LOCAL";const Ei=_i;function Ii(t){var e,n;const i=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),r=RegExp("".concat(i,"=([^;]+)"));return null!==(e=null===(n=document.cookie.match(r))||void 0===n?void 0:n[1])&&void 0!==e?e:null}function bi(t){const e="http:"===window.location.protocol;return"".concat(e?"__dev_":"__HOST-","FIREBASE_").concat(t.split(":")[3])}class Ti{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(t){if(void 0===typeof window)return t;const e=new URL("".concat(window.location.origin,"/__cookies__"));return e.searchParams.set("finalTarget",t),e}async _isAvailable(){var t;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(t=navigator.cookieEnabled)||void 0===t||t))}async _set(t,e){}async _get(t){if(!this._isAvailable())return null;const e=bi(t);if(window.cookieStore){const t=await window.cookieStore.get(e);return null===t||void 0===t?void 0:t.value}return Ii(e)}async _remove(t){if(!this._isAvailable())return;if(!await this._get(t))return;const e=bi(t);document.cookie="".concat(e,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(t,e){if(!this._isAvailable())return;const n=bi(t);if(window.cookieStore){const t=t=>{const i=t.changed.find(t=>t.name===n);i&&e(i.value);t.deleted.find(t=>t.name===n)&&e(null)},i=()=>window.cookieStore.removeEventListener("change",t);return this.listenerUnsubscribes.set(e,i),window.cookieStore.addEventListener("change",t)}let i=Ii(n);const r=setInterval(()=>{const t=Ii(n);t!==i&&(e(t),i=t)},1e3);this.listenerUnsubscribes.set(e,()=>clearInterval(r))}_removeListener(t,e){const n=this.listenerUnsubscribes.get(e);n&&(n(),this.listenerUnsubscribes.delete(e))}}Ti.type="COOKIE";class Si extends wi{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}Si.type="SESSION";const Ai=Si;class Ci{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(e=>e.isListeningto(t));if(e)return e;const n=new Ci(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,s=this.handlersMap[i];if(null===s||void 0===s||!s.size)return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map(async t=>t(e.origin,r)),a=await function(t){return Promise.all(t.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ki(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let i=0;i<e;i++)n+=Math.floor(10*Math.random());return t+n}Ci.receivers=[];class Ni{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise((o,a)=>{const c=ki("",20);i.port1.start();const l=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(l),r=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),o(e.data.response);break;default:clearTimeout(l),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Ri(){return window}function Oi(){return"undefined"!==typeof Ri().WorkerGlobalScope&&"function"===typeof Ri().importScripts}const Pi="firebaseLocalStorageDb",Di="firebaseLocalStorage",Li="fbase_key";class Mi{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function xi(t,e){return t.transaction([Di],e?"readwrite":"readonly").objectStore(Di)}function Vi(){const t=indexedDB.open(Pi,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const e=t.result;try{e.createObjectStore(Di,{keyPath:Li})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Di)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(Pi);return new Mi(t).toPromise()}(),e(await Vi()))})})}async function Ui(t,e,n){const i=xi(t,!0).put({[Li]:e,value:n});return new Mi(i).toPromise()}function Fi(t,e){const n=xi(t,!0).delete(e);return new Mi(n).toPromise()}class ji{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Vi()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(n){if(e++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Oi()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ci._getInstance(Oi()?self:null),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){var t;if(null===(t=navigator)||void 0===t||!t.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ni(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(t=n[0])&&void 0!==t&&t.fulfilled&&null!==(e=n[0])&&void 0!==e&&e.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(this.sender&&this.activeServiceWorker&&function(){var t;return(null===(t=navigator)||void 0===t||null===(t=t.serviceWorker)||void 0===t?void 0:t.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Vi();return await Ui(t,vi,"1"),await Fi(t,vi),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ui(n,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(e=>async function(t,e){const n=xi(t,!1).get(e),i=await new Mi(n).toPromise();return void 0===i?null:i.value}(e,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>Fi(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(t=>{const e=xi(t,!1).getAll();return new Mi(e).toPromise()});if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;if(0!==t.length)for(const{fbase_key:i,value:r}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ji.type="LOCAL";const Bi=ji;function Hi(t,e){return Be(t,"POST","/v2/accounts/mfaSignIn:start",je(t,e))}xn("rcb"),new Le(3e4,6e4);const qi="recaptcha";async function zi(t,e,n){if(!t._getRecaptchaConfig())try{await qn(t)}catch(r){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"===typeof e?{phoneNumber:e}:e,"session"in r){const e=r.session;if("phoneNumber"in r){Ce("enroll"===e.type,t,"internal-error");const i={idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Hn(t,i,"mfaSmsEnrollment",async(t,e)=>{if(e.phoneEnrollmentInfo.captchaResponse===Fn){Ce((null===n||void 0===n?void 0:n.type)===qi,t,"argument-error");return yi(t,await Ki(t,e,n))}return yi(t,e)},"PHONE_PROVIDER");return(await s.catch(t=>Promise.reject(t))).phoneSessionInfo.sessionInfo}{var i;Ce("signin"===e.type,t,"internal-error");const s=(null===(i=r.multiFactorHint)||void 0===i?void 0:i.uid)||r.multiFactorUid;Ce(s,t,"missing-multi-factor-info");const o={mfaPendingCredential:e.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Hn(t,o,"mfaSmsSignIn",async(t,e)=>{if(e.phoneSignInInfo.captchaResponse===Fn){Ce((null===n||void 0===n?void 0:n.type)===qi,t,"argument-error");return Hi(t,await Ki(t,e,n))}return Hi(t,e)},"PHONE_PROVIDER");return(await a.catch(t=>Promise.reject(t))).phoneResponseInfo.sessionInfo}}{const e={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},i=Hn(t,e,"sendVerificationCode",async(t,e)=>{if(e.captchaResponse===Fn){Ce((null===n||void 0===n?void 0:n.type)===qi,t,"argument-error");return Zn(t,await Ki(t,e,n))}return Zn(t,e)},"PHONE_PROVIDER");return(await i.catch(t=>Promise.reject(t))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Ki(t,e,n){Ce(n.type===qi,t,"argument-error");const i=await n.verify();Ce("string"===typeof i,t,"argument-error");const r=a({},e);if("phoneEnrollmentInfo"in r){const t=r.phoneEnrollmentInfo.phoneNumber,e=r.phoneEnrollmentInfo.captchaResponse,n=r.phoneEnrollmentInfo.clientType,s=r.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(r,{phoneEnrollmentInfo:{phoneNumber:t,recaptchaToken:i,captchaResponse:e,clientType:n,recaptchaVersion:s}}),r}if("phoneSignInInfo"in r){const t=r.phoneSignInInfo.captchaResponse,e=r.phoneSignInInfo.clientType,n=r.phoneSignInInfo.recaptchaVersion;return Object.assign(r,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:t,clientType:e,recaptchaVersion:n}}),r}return Object.assign(r,{recaptchaToken:i}),r}class Wi{constructor(t){this.providerId=Wi.PROVIDER_ID,this.auth=Pn(t)}verifyPhoneNumber(t,e){return zi(this.auth,t,U(e))}static credential(t,e){return ei._fromVerification(t,e)}static credentialFromResult(t){const e=t;return Wi.credentialFromTaggedObject(e)}static credentialFromError(t){return Wi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject(t){let{_tokenResponse:e}=t;if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?ei._fromTokenResponse(n,i):null}}function Gi(t,e){return e?dn(e):(Ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}Wi.PROVIDER_ID="phone",Wi.PHONE_SIGN_IN_METHOD="phone";class Ji extends Gn{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Yn(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Yn(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Yn(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Qi(t){return mi(t.auth,new Ji(t),t.bypassAuthState)}function Xi(t){const{auth:e,user:n}=t;return Ce(n,e,"internal-error"),gi(n,new Ji(t),t.bypassAuthState)}async function Yi(t){const{auth:e,user:n}=t;return Ce(n,e,"internal-error"),pi(n,new Ji(t),t.bypassAuthState)}class $i{constructor(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Qi;case"linkViaPopup":case"linkViaRedirect":return Yi;case"reauthViaPopup":case"reauthViaRedirect":return Xi;default:Ie(this.auth,"internal-error")}}resolve(t){Ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zi=new Le(2e3,1e4);class tr extends $i{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,tr.currentPopupAction&&tr.currentPopupAction.cancel(),tr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ce(t,this.auth,"internal-error"),t}async onExecution(){Ne(1===this.filter.length,"Popup operations only handle one event");const t=ki();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(be(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tr.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e;null!==(e=this.authWindow)&&void 0!==e&&null!==(e=e.window)&&void 0!==e&&e.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(be(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(t,Zi.get())};t()}}tr.currentPopupAction=null;const er=new Map;class nr extends $i{constructor(t,e){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let t=er.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=sr(e),i=rr(t);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=e?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}er.set(this.auth._key(),t)}return this.bypassAuthState||er.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ir(t,e){er.set(t._key(),e)}function rr(t){return dn(t._redirectPersistence)}function sr(t){return gn("pendingRedirect",t.config.apiKey,t.name)}async function or(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Xt(t.app))return Promise.reject(Se(t));const i=Pn(t),r=Gi(i,e),s=new nr(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}class ar{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lr(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!lr(t)){var n;const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(be(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(cr(t))}saveEventToCache(t){this.cachedEventUids.add(cr(t)),this.lastProcessedEventTime=Date.now()}}function cr(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(t=>t).join("-")}function lr(t){let{type:e,error:n}=t;return"unknown"===e&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const hr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ur=/^https?/;async function dr(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t){return Be(t,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(t);for(const i of e)try{if(fr(i))return}catch(n){}Ie(t,"unauthorized-domain")}function fr(t){const e=Re(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!ur.test(n))return!1;if(hr.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const pr=new Le(3e4,6e4);function gr(){const t=Ri().___jsl;if(null!==t&&void 0!==t&&t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function mr(t){return new Promise((e,n)=>{var i,r;function s(){gr(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gr(),n(be(t,"network-request-failed"))},timeout:pr.get()})}if(null!==(i=Ri().gapi)&&void 0!==i&&null!==(i=i.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(r=Ri().gapi)||void 0===r||!r.load){const e=xn("iframefcb");return Ri()[e]=()=>{gapi.load?s():n(be(t,"network-request-failed"))},Mn("".concat(Ln.gapiScript,"?onload=").concat(e)).catch(t=>n(t))}s()}}).catch(t=>{throw yr=null,t})}let yr=null;const vr=new Le(5e3,15e3),wr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_r=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Er(t){const e=t.config;Ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Me(e,"emulator/auth/iframe"):"https://".concat(t.config.authDomain,"/").concat("__/auth/iframe"),i={apiKey:e.apiKey,appName:t.name,v:Zt},r=_r.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),"".concat(n,"?").concat(D(i).slice(1))}async function Ir(t){const e=await function(t){return yr=yr||mr(t),yr}(t),n=Ri().gapi;return Ce(n,t,"internal-error"),e.open({where:document.body,url:Er(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wr,dontclear:!0},e=>new Promise(async(n,i)=>{await e.restyle({setHideOnLeave:!1});const r=be(t,"network-request-failed"),s=Ri().setTimeout(()=>{i(r)},vr.get());function o(){Ri().clearTimeout(s),n(e)}e.ping(o).then(o,()=>{i(r)})}))}const br={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Tr{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function Sr(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const l=a(a({},br),{},{width:i.toString(),height:r.toString(),top:s,left:o}),h=T().toLowerCase();n&&(c=_n(h)?"_blank":n),vn(h)&&(e=e||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((t,e)=>{let[n,i]=e;return"".concat(t).concat(n,"=").concat(i,",")},"");if(function(){var t;return Sn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:T())&&!(null===(t=window.navigator)||void 0===t||!t.standalone)}(h)&&"_self"!==c)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(e||"",c),new Tr(null);const d=window.open(e||"",c,u);Ce(d,t,"popup-blocked");try{d.focus()}catch(f){}return new Tr(d)}const Ar="__/auth/handler",Cr="emulator/auth/handler",kr=encodeURIComponent("fac");async function Nr(t,e,n,i,r,s){Ce(t.config.authDomain,t,"auth-domain-config-required"),Ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Zt,eventId:r};if(e instanceof ri){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(s||{}))o[t]=e}if(e instanceof si){const t=e.getScopes().filter(t=>""!==t);t.length>0&&(o.scopes=t.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))void 0===a[h]&&delete a[h];const c=await t._getAppCheckToken(),l=c?"#".concat(kr,"=").concat(encodeURIComponent(c)):"";return"".concat(function(t){let{config:e}=t;if(!e.emulator)return"https://".concat(e.authDomain,"/").concat(Ar);return Me(e,Cr)}(t),"?").concat(D(a).slice(1)).concat(l)}const Rr="webStorageSupport";const Or=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ai,this._completeRedirectFn=or,this._overrideRedirectResult=ir}async _openPopup(t,e,n,i){var r;Ne(null===(r=this.eventManagers[t._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return Sr(t,await Nr(t,e,n,Re(),i),ki())}async _openRedirect(t,e,n,i){await this._originValidation(t);return function(t){Ri().location.href=t}(await Nr(t,e,n,Re(),i)),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(Ne(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch(()=>{delete this.eventManagers[e]}),n}async initAndGetManager(t){const e=await Ir(t),n=new ar(t);return e.register("authEvent",e=>{Ce(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event");return{status:n.onEvent(e.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Rr,{type:Rr},n=>{var i;const r=null===n||void 0===n||null===(i=n[0])||void 0===i?void 0:i[Rr];void 0!==r&&e(!!r),Ie(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=dr(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Cn()||wn()||Sn()}};var Pr="@firebase/auth",Dr="1.11.1";class Lr{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(t)}}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(e=>{t((null===e||void 0===e?void 0:e.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Mr=y("authIdTokenMaxAge")||300;let xr=null;var Vr;Ln={loadJS:t=>new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=be("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",function(){var t,e;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(i)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Vr="Browser",Jt(new F("auth",(t,e)=>{let{options:n}=e;const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Ce(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:o,authDomain:a,clientPlatform:Vr,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kn(Vr)},l=new On(i,r,s,c);return function(t,e){const n=(null===e||void 0===e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(dn);null!==e&&void 0!==e&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null===e||void 0===e?void 0:e.popupRedirectResolver)}(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider("auth-internal").initialize()})),Jt(new F("auth-internal",t=>(t=>new Lr(t))(Pn(t.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),ne(Pr,Dr,function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Vr)),ne(Pr,Dr,"esm2020");var Ur,Fr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},jr={};(function(){var t;function e(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(t,e,n){n||(n=0);const i=Array(16);if("string"===typeof e)for(var r=0;r<16;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;r<16;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];let s,o=t.g[3];s=e+(o^n&(r^o))+i[0]+3614090360&4294967295,s=o+(r^(e=n+(s<<7&4294967295|s>>>25))&(n^r))+i[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=r+(n^o&(e^n))+i[2]+606105819&4294967295,s=n+(e^(r=o+(s<<17&4294967295|s>>>15))&(o^e))+i[3]+3250441966&4294967295,s=e+(o^(n=r+(s<<22&4294967295|s>>>10))&(r^o))+i[4]+4118548399&4294967295,s=o+(r^(e=n+(s<<7&4294967295|s>>>25))&(n^r))+i[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=r+(n^o&(e^n))+i[6]+2821735955&4294967295,s=n+(e^(r=o+(s<<17&4294967295|s>>>15))&(o^e))+i[7]+4249261313&4294967295,s=e+(o^(n=r+(s<<22&4294967295|s>>>10))&(r^o))+i[8]+1770035416&4294967295,s=o+(r^(e=n+(s<<7&4294967295|s>>>25))&(n^r))+i[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=r+(n^o&(e^n))+i[10]+4294925233&4294967295,s=n+(e^(r=o+(s<<17&4294967295|s>>>15))&(o^e))+i[11]+2304563134&4294967295,s=e+(o^(n=r+(s<<22&4294967295|s>>>10))&(r^o))+i[12]+1804603682&4294967295,s=o+(r^(e=n+(s<<7&4294967295|s>>>25))&(n^r))+i[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=r+(n^o&(e^n))+i[14]+2792965006&4294967295,s=n+(e^(r=o+(s<<17&4294967295|s>>>15))&(o^e))+i[15]+1236535329&4294967295,s=e+(r^o&((n=r+(s<<22&4294967295|s>>>10))^r))+i[1]+4129170786&4294967295,s=o+(n^r&((e=n+(s<<5&4294967295|s>>>27))^n))+i[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=r+(e^n&(o^e))+i[11]+643717713&4294967295,s=n+(o^e&((r=o+(s<<14&4294967295|s>>>18))^o))+i[0]+3921069994&4294967295,s=e+(r^o&((n=r+(s<<20&4294967295|s>>>12))^r))+i[5]+3593408605&4294967295,s=o+(n^r&((e=n+(s<<5&4294967295|s>>>27))^n))+i[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=r+(e^n&(o^e))+i[15]+3634488961&4294967295,s=n+(o^e&((r=o+(s<<14&4294967295|s>>>18))^o))+i[4]+3889429448&4294967295,s=e+(r^o&((n=r+(s<<20&4294967295|s>>>12))^r))+i[9]+568446438&4294967295,s=o+(n^r&((e=n+(s<<5&4294967295|s>>>27))^n))+i[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=r+(e^n&(o^e))+i[3]+4107603335&4294967295,s=n+(o^e&((r=o+(s<<14&4294967295|s>>>18))^o))+i[8]+1163531501&4294967295,s=e+(r^o&((n=r+(s<<20&4294967295|s>>>12))^r))+i[13]+2850285829&4294967295,s=o+(n^r&((e=n+(s<<5&4294967295|s>>>27))^n))+i[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=r+(e^n&(o^e))+i[7]+1735328473&4294967295,s=n+(o^e&((r=o+(s<<14&4294967295|s>>>18))^o))+i[12]+2368359562&4294967295,s=e+((n=r+(s<<20&4294967295|s>>>12))^r^o)+i[5]+4294588738&4294967295,s=o+((e=n+(s<<4&4294967295|s>>>28))^n^r)+i[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=r+(o^e^n)+i[11]+1839030562&4294967295,s=n+((r=o+(s<<16&4294967295|s>>>16))^o^e)+i[14]+4259657740&4294967295,s=e+((n=r+(s<<23&4294967295|s>>>9))^r^o)+i[1]+2763975236&4294967295,s=o+((e=n+(s<<4&4294967295|s>>>28))^n^r)+i[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=r+(o^e^n)+i[7]+4139469664&4294967295,s=n+((r=o+(s<<16&4294967295|s>>>16))^o^e)+i[10]+3200236656&4294967295,s=e+((n=r+(s<<23&4294967295|s>>>9))^r^o)+i[13]+681279174&4294967295,s=o+((e=n+(s<<4&4294967295|s>>>28))^n^r)+i[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=r+(o^e^n)+i[3]+3572445317&4294967295,s=n+((r=o+(s<<16&4294967295|s>>>16))^o^e)+i[6]+76029189&4294967295,s=e+((n=r+(s<<23&4294967295|s>>>9))^r^o)+i[9]+3654602809&4294967295,s=o+((e=n+(s<<4&4294967295|s>>>28))^n^r)+i[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=r+(o^e^n)+i[15]+530742520&4294967295,s=n+((r=o+(s<<16&4294967295|s>>>16))^o^e)+i[2]+3299628645&4294967295,s=e+(r^((n=r+(s<<23&4294967295|s>>>9))|~o))+i[0]+4096336452&4294967295,s=o+(n^((e=n+(s<<6&4294967295|s>>>26))|~r))+i[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=r+(e^(o|~n))+i[14]+2878612391&4294967295,s=n+(o^((r=o+(s<<15&4294967295|s>>>17))|~e))+i[5]+4237533241&4294967295,s=e+(r^((n=r+(s<<21&4294967295|s>>>11))|~o))+i[12]+1700485571&4294967295,s=o+(n^((e=n+(s<<6&4294967295|s>>>26))|~r))+i[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=r+(e^(o|~n))+i[10]+4293915773&4294967295,s=n+(o^((r=o+(s<<15&4294967295|s>>>17))|~e))+i[1]+2240044497&4294967295,s=e+(r^((n=r+(s<<21&4294967295|s>>>11))|~o))+i[8]+1873313359&4294967295,s=o+(n^((e=n+(s<<6&4294967295|s>>>26))|~r))+i[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=r+(e^(o|~n))+i[6]+2734768916&4294967295,s=n+(o^((r=o+(s<<15&4294967295|s>>>17))|~e))+i[13]+1309151649&4294967295,s=e+(r^((n=r+(s<<21&4294967295|s>>>11))|~o))+i[4]+4149444226&4294967295,s=o+(n^((e=n+(s<<6&4294967295|s>>>26))|~r))+i[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=r+(e^(o|~n))+i[2]+718787259&4294967295,s=n+(o^((r=o+(s<<15&4294967295|s>>>17))|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+o&4294967295}function i(t,e){this.h=e;const n=[];let i=!0;for(let r=t.length-1;r>=0;r--){const s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}!function(t,e){function n(){}n.prototype=e.prototype,t.F=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.D=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}(e,function(){this.blockSize=-1}),e.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},e.prototype.v=function(t,e){void 0===e&&(e=t.length);const i=e-this.blockSize,r=this.C;let s=this.h,o=0;for(;o<e;){if(0==s)for(;o<=i;)n(this,t,o),o+=this.blockSize;if("string"===typeof t){for(;o<e;)if(r[s++]=t.charCodeAt(o++),s==this.blockSize){n(this,r),s=0;break}}else for(;o<e;)if(r[s++]=t[o++],s==this.blockSize){n(this,r),s=0;break}}this.h=s,this.o+=e},e.prototype.A=function(){var t=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;e=8*this.o;for(var n=t.length-8;n<t.length;++n)t[n]=255&e,e/=256;for(this.v(t),t=Array(16),e=0,n=0;n<4;++n)for(let i=0;i<32;i+=8)t[e++]=this.g[n]>>>i&255;return t};var r={};function s(t){return-128<=t&&t<128?function(t,e){var n=r;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(t){return new i([0|t],t<0?-1:0)}):new i([0|t],t<0?-1:0)}function o(t){if(isNaN(t)||!isFinite(t))return a;if(t<0)return d(o(-t));const e=[];let n=1;for(let i=0;t>=n;i++)e[i]=t/n|0,n*=4294967296;return new i(e,0)}var a=s(0),c=s(1),l=s(16777216);function h(t){if(0!=t.h)return!1;for(let e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function u(t){return-1==t.h}function d(t){const e=t.g.length,n=[];for(let i=0;i<e;i++)n[i]=~t.g[i];return new i(n,~t.h).add(c)}function f(t,e){return t.add(d(e))}function p(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function g(t,e){this.g=t,this.h=e}function m(t,e){if(h(e))throw Error("division by zero");if(h(t))return new g(a,a);if(u(t))return e=m(d(t),e),new g(d(e.g),d(e.h));if(u(e))return e=m(t,d(e)),new g(d(e.g),e.h);if(t.g.length>30){if(u(t)||u(e))throw Error("slowDivide_ only works with positive integers.");for(var n=c,i=e;i.l(t)<=0;)n=y(n),i=y(i);var r=v(n,1),s=v(i,1);for(i=v(i,2),n=v(n,2);!h(i);){var l=s.add(i);l.l(t)<=0&&(r=r.add(n),s=l),i=v(i,1),n=v(n,1)}return e=f(t,r.j(e)),new g(r,e)}for(r=a;t.l(e)>=0;){for(n=Math.max(1,Math.floor(t.m()/e.m())),i=(i=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,i-48),l=(s=o(n)).j(e);u(l)||l.l(t)>0;)l=(s=o(n-=i)).j(e);h(s)&&(s=c),r=r.add(s),t=f(t,l)}return new g(r,t)}function y(t){const e=t.g.length+1,n=[];for(let i=0;i<e;i++)n[i]=t.i(i)<<1|t.i(i-1)>>>31;return new i(n,t.h)}function v(t,e){const n=e>>5;e%=32;const r=t.g.length-n,s=[];for(let i=0;i<r;i++)s[i]=e>0?t.i(i+n)>>>e|t.i(i+n+1)<<32-e:t.i(i+n);return new i(s,t.h)}(t=i.prototype).m=function(){if(u(this))return-d(this).m();let t=0,e=1;for(let n=0;n<this.g.length;n++){const i=this.i(n);t+=(i>=0?i:4294967296+i)*e,e*=4294967296}return t},t.toString=function(t){if((t=t||10)<2||36<t)throw Error("radix out of range: "+t);if(h(this))return"0";if(u(this))return"-"+d(this).toString(t);const e=o(Math.pow(t,6));var n=this;let i="";for(;;){const r=m(n,e).g;let s=(((n=f(n,r.j(e))).g.length>0?n.g[0]:n.h)>>>0).toString(t);if(h(n=r))return s+i;for(;s.length<6;)s="0"+s;i=s+i}},t.i=function(t){return t<0?0:t<this.g.length?this.g[t]:this.h},t.l=function(t){return u(t=f(this,t))?-1:h(t)?0:1},t.abs=function(){return u(this)?d(this):this},t.add=function(t){const e=Math.max(this.g.length,t.g.length),n=[];let r=0;for(let i=0;i<=e;i++){let e=r+(65535&this.i(i))+(65535&t.i(i)),s=(e>>>16)+(this.i(i)>>>16)+(t.i(i)>>>16);r=s>>>16,e&=65535,s&=65535,n[i]=s<<16|e}return new i(n,-2147483648&n[n.length-1]?-1:0)},t.j=function(t){if(h(this)||h(t))return a;if(u(this))return u(t)?d(this).j(d(t)):d(d(this).j(t));if(u(t))return d(this.j(d(t)));if(this.l(l)<0&&t.l(l)<0)return o(this.m()*t.m());const e=this.g.length+t.g.length,n=[];for(var r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let e=0;e<t.g.length;e++){const i=this.i(r)>>>16,s=65535&this.i(r),o=t.i(e)>>>16,a=65535&t.i(e);n[2*r+2*e]+=s*a,p(n,2*r+2*e),n[2*r+2*e+1]+=i*a,p(n,2*r+2*e+1),n[2*r+2*e+1]+=s*o,p(n,2*r+2*e+1),n[2*r+2*e+2]+=i*o,p(n,2*r+2*e+2)}for(t=0;t<e;t++)n[t]=n[2*t+1]<<16|n[2*t];for(t=e;t<2*e;t++)n[t]=0;return new i(n,0)},t.B=function(t){return m(this,t).h},t.and=function(t){const e=Math.max(this.g.length,t.g.length),n=[];for(let i=0;i<e;i++)n[i]=this.i(i)&t.i(i);return new i(n,this.h&t.h)},t.or=function(t){const e=Math.max(this.g.length,t.g.length),n=[];for(let i=0;i<e;i++)n[i]=this.i(i)|t.i(i);return new i(n,this.h|t.h)},t.xor=function(t){const e=Math.max(this.g.length,t.g.length),n=[];for(let i=0;i<e;i++)n[i]=this.i(i)^t.i(i);return new i(n,this.h^t.h)},e.prototype.digest=e.prototype.A,e.prototype.reset=e.prototype.u,e.prototype.update=e.prototype.v,jr.Md5=e,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.B,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=o,i.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return d(t(e.substring(1),n));if(e.indexOf("-")>=0)throw Error('number format error: interior "-" character');const i=o(Math.pow(n,8));let r=a;for(let a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a);const t=parseInt(e.substring(a,a+s),n);s<8?(s=o(Math.pow(n,s)),r=r.j(s).add(o(t))):(r=r.j(i),r=r.add(o(t)))}return r},Ur=jr.Integer=i}).apply("undefined"!==typeof Fr?Fr:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Br,Hr,qr,zr,Kr,Wr,Gr,Jr,Qr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Xr={};(function(){var t,e=Object.defineProperty;var n=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Qr&&Qr];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function i(t,i){if(i)t:{var r=n;t=t.split(".");for(var s=0;s<t.length-1;s++){var o=t[s];if(!(o in r))break t;r=r[o]}(i=i(s=r[t=t[t.length-1]]))!=s&&null!=i&&e(r,t,{configurable:!0,writable:!0,value:i})}}i("Symbol.dispose",function(t){return t||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(t){return t||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(t){return t||function(t){var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push([e,t[e]]);return n}});var r=r||{},s=this||self;function o(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function a(t,e,n){return t.call.apply(t.bind,arguments)}function c(t,e,n){return(c=a).apply(null,arguments)}function l(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function h(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Ob=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}var u="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?t=>t&&AsyncContext.Snapshot.wrap(t):t=>t;function d(t){const e=t.length;if(e>0){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function f(t,e){for(let i=1;i<arguments.length;i++){const e=arguments[i];var n=typeof e;if("array"==(n="object"!=n?n:e?Array.isArray(e)?"array":n:"null")||"object"==n&&"number"==typeof e.length){n=t.length||0;const i=e.length||0;t.length=n+i;for(let r=0;r<i;r++)t[n+r]=e[r]}else t.push(e)}}function p(t){s.setTimeout(()=>{throw t},0)}function g(){var t=_;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var m=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return this.h>0?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new y,t=>t.reset());class y{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}let v,w=!1,_=new class{constructor(){this.h=this.g=null}add(t,e){const n=m.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},E=()=>{const t=Promise.resolve(void 0);v=()=>{t.then(I)}};function I(){for(var t;t=g();){try{t.h.call(t.g)}catch(n){p(n)}var e=m;e.j(t),e.h<100&&(e.h++,t.next=e.g,e.g=t)}w=!1}function b(){this.u=this.u,this.C=this.C}function T(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},T.prototype.h=function(){this.defaultPrevented=!0};var S=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};s.addEventListener("test",t,e),s.removeEventListener("test",t,e)}catch(n){}return t}();function A(t){return/^[\s\xa0]*$/.test(t)}function C(t,e){T.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t&&this.init(t,e)}h(C,T),C.prototype.init=function(t,e){const n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;this.target=t.target||t.srcElement,this.g=e,(e=t.relatedTarget)||("mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement)),this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=t.pointerType,this.state=t.state,this.i=t,t.defaultPrevented&&C.Z.h.call(this)},C.prototype.h=function(){C.Z.h.call(this);const t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var k="closure_listenable_"+(1e6*Math.random()|0),N=0;function R(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ha=r,this.key=++N,this.da=this.fa=!1}function O(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function P(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function D(t){const e={};for(const n in t)e[n]=t[n];return e}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(t,e){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)t[n]=i[n];for(let e=0;e<L.length;e++)n=L[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function x(t){this.src=t,this.g={},this.h=0}function V(t,e){const n=e.type;if(n in t.g){var i,r=t.g[n],s=Array.prototype.indexOf.call(r,e,void 0);(i=s>=0)&&Array.prototype.splice.call(r,s,1),i&&(O(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function U(t,e,n,i){for(let r=0;r<t.length;++r){const s=t[r];if(!s.da&&s.listener==e&&s.capture==!!n&&s.ha==i)return r}return-1}x.prototype.add=function(t,e,n,i,r){const s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);const o=U(t,e,i,r);return o>-1?(e=t[o],n||(e.fa=!1)):((e=new R(e,this.src,s,!!i,r)).fa=n,t.push(e)),e};var F="closure_lm_"+(1e6*Math.random()|0),j={};function B(t,e,n,i,r){if(i&&i.once)return q(t,e,n,i,r);if(Array.isArray(e)){for(let s=0;s<e.length;s++)B(t,e[s],n,i,r);return null}return n=X(n),t&&t[k]?t.J(e,n,o(i)?!!i.capture:!!i,r):H(t,e,n,!1,i,r)}function H(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");const a=o(r)?!!r.capture:!!r;let c=J(t);if(c||(t[F]=c=new x(t)),(n=c.add(e,n,i,a,s)).proxy)return n;if(i=function(){function t(n){return e.call(t.src,t.listener,n)}const e=G;return t}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)S||(r=a),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(W(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function q(t,e,n,i,r){if(Array.isArray(e)){for(let s=0;s<e.length;s++)q(t,e[s],n,i,r);return null}return n=X(n),t&&t[k]?t.K(e,n,o(i)?!!i.capture:!!i,r):H(t,e,n,!0,i,r)}function z(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)z(t,e[s],n,i,r);else i=o(i)?!!i.capture:!!i,n=X(n),t&&t[k]?(t=t.i,(s=String(e).toString())in t.g&&((n=U(e=t.g[s],n,i,r))>-1&&(O(e[n]),Array.prototype.splice.call(e,n,1),0==e.length&&(delete t.g[s],t.h--)))):t&&(t=J(t))&&(e=t.g[e.toString()],t=-1,e&&(t=U(e,n,i,r)),(n=t>-1?e[t]:null)&&K(n))}function K(t){if("number"!==typeof t&&t&&!t.da){var e=t.src;if(e&&e[k])V(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(W(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=J(e))?(V(n,t),0==n.h&&(n.src=null,e[F]=null)):O(t)}}}function W(t){return t in j?j[t]:j[t]="on"+t}function G(t,e){if(t.da)t=!0;else{e=new C(e,this);const n=t.listener,i=t.ha||t.src;t.fa&&K(t),t=n.call(i,e)}return t}function J(t){return(t=t[F])instanceof x?t:null}var Q="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(t){return"function"===typeof t?t:(t[Q]||(t[Q]=function(e){return t.handleEvent(e)}),t[Q])}function Y(){b.call(this),this.i=new x(this),this.M=this,this.G=null}function $(t,e){var n,i=t.G;if(i)for(n=[];i;i=i.G)n.push(i);if(t=t.M,i=e.type||e,"string"===typeof e)e=new T(e,t);else if(e instanceof T)e.target=e.target||t;else{var r=e;M(e=new T(i,t),r)}let s,o;if(r=!0,n)for(o=n.length-1;o>=0;o--)s=e.g=n[o],r=Z(s,i,!0,e)&&r;if(s=e.g=t,r=Z(s,i,!0,e)&&r,r=Z(s,i,!1,e)&&r,n)for(o=0;o<n.length;o++)s=e.g=n[o],r=Z(s,i,!1,e)&&r}function Z(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();let r=!0;for(let s=0;s<e.length;++s){const o=e[s];if(o&&!o.da&&o.capture==n){const e=o.listener,n=o.ha||o.src;o.fa&&V(t.i,o),r=!1!==e.call(n,i)&&r}}return r&&!i.defaultPrevented}function tt(t){t.g=function(t,e){if("function"!==typeof t){if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=c(t.handleEvent,t)}return Number(e)>2147483647?-1:s.setTimeout(t,e||0)}(()=>{t.g=null,t.i&&(t.i=!1,tt(t))},t.l);const e=t.h;t.h=null,t.m.apply(null,e)}h(Y,b),Y.prototype[k]=!0,Y.prototype.removeEventListener=function(t,e,n,i){z(this,t,e,n,i)},Y.prototype.N=function(){if(Y.Z.N.call(this),this.i){var t=this.i;for(const e in t.g){const n=t.g[e];for(let t=0;t<n.length;t++)O(n[t]);delete t.g[e],t.h--}}this.G=null},Y.prototype.J=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},Y.prototype.K=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};class et extends b{constructor(t,e){super(),this.m=t,this.l=e,this.h=null,this.i=!1,this.g=null}j(t){this.h=arguments,this.g?this.i=!0:tt(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nt(t){b.call(this),this.h=t,this.g={}}h(nt,b);var it=[];function rt(t){P(t.g,function(t,e){this.g.hasOwnProperty(e)&&K(t)},t),t.g={}}nt.prototype.N=function(){nt.Z.N.call(this),rt(this)},nt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var st=s.JSON.stringify,ot=s.JSON.parse,at=class{stringify(t){return s.JSON.stringify(t,void 0)}parse(t){return s.JSON.parse(t,void 0)}};function ct(){}function lt(){}var ht={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ut(){T.call(this,"d")}function dt(){T.call(this,"c")}h(ut,T),h(dt,T);var ft={},pt=null;function gt(){return pt=pt||new Y}function mt(t){T.call(this,ft.Ia,t)}function yt(t){const e=gt();$(e,new mt(e))}function vt(t,e){T.call(this,ft.STAT_EVENT,t),this.stat=e}function wt(t){const e=gt();$(e,new vt(e,t))}function _t(t,e){T.call(this,ft.Ja,t),this.size=e}function Et(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){t()},e)}function It(){this.g=!0}function bt(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{const s=JSON.parse(e);if(s)for(t=0;t<s.length;t++)if(Array.isArray(s[t])){var n=s[t];if(!(n.length<2)){var i=n[1];if(Array.isArray(i)&&!(i.length<1)){var r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(let t=1;t<i.length;t++)i[t]=""}}}return st(s)}catch(s){return e}}(t,n)+(i?" "+i:"")})}ft.Ia="serverreachability",h(mt,T),ft.STAT_EVENT="statevent",h(vt,T),ft.Ja="timingevent",h(_t,T),It.prototype.ua=function(){this.g=!1},It.prototype.info=function(){};var Tt,St={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},At={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ct(){}function kt(t){return encodeURIComponent(String(t))}function Nt(t){var e=1;t=t.split(":");const n=[];for(;e>0&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Rt(t,e,n,i){this.j=t,this.i=e,this.l=n,this.S=i||1,this.V=new nt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ot}function Ot(){this.i=null,this.g="",this.h=!1}h(Ct,ct),Ct.prototype.g=function(){return new XMLHttpRequest},Tt=new Ct;var Pt={},Dt={};function Lt(t,e,n){t.M=1,t.A=se(te(e)),t.u=n,t.R=!0,Mt(t,null)}function Mt(t,e){t.F=Date.now(),Ut(t),t.B=te(t.A);var n=t.B,i=t.S;Array.isArray(i)||(i=[String(i)]),we(n.i,"t",i),t.C=0,n=t.j.L,t.h=new Ot,t.g=on(t.j,n?e:null,!t.u),t.P>0&&(t.O=new et(c(t.Y,t,t.g),t.P)),e=t.V,n=t.g,i=t.ba;var r="readystatechange";Array.isArray(r)||(r&&(it[0]=r.toString()),r=it);for(let s=0;s<r.length;s++){const t=B(n,r[s],i||e.handleEvent,!1,e.h||e);if(!t)break;e.g[t.key]=t}e=t.J?D(t.J):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.B,t.v,t.u,e)):(t.v="GET",t.g.ea(t.B,t.v,null,e)),yt(),function(t,e,n,i,r,s){t.info(function(){if(t.g)if(s){var o="",a=s.split("&");for(let t=0;t<a.length;t++){var c=a[t].split("=");if(c.length>1){const t=c[0];c=c[1];const e=t.split("_");o=e.length>=2&&"type"==e[1]?o+(t+"=")+c+"&":o+(t+"=redacted&")}}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o})}(t.i,t.v,t.B,t.l,t.S,t.u)}function xt(t){return!!t.g&&("GET"==t.v&&2!=t.M&&t.j.Aa)}function Vt(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?Dt:(n=Number(e.substring(n,i)),isNaN(n)?Pt:(i+=1)+n>e.length?Dt:(e=e.slice(i,i+n),t.C=i+n,e))}function Ut(t){t.T=Date.now()+t.H,Ft(t,t.H)}function Ft(t,e){if(null!=t.D)throw Error("WatchDog timer not null");t.D=Et(c(t.aa,t),e)}function jt(t){t.D&&(s.clearTimeout(t.D),t.D=null)}function Bt(t){0==t.j.I||t.K||tn(t.j,t)}function Ht(t){jt(t);var e=t.O;e&&"function"==typeof e.dispose&&e.dispose(),t.O=null,rt(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.dispose())}function qt(t,e){try{var n=t.j;if(0!=n.I&&(n.g==t||Jt(n.h,t)))if(!t.L&&Jt(n.h,t)&&3==n.I){try{var i=n.Ba.g.parse(e)}catch(h){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.v){if(n.g){if(!(n.g.F+3e3<t.F))break t;Ze(n),qe(n)}Xe(n),wt(18)}}else n.xa=r[1],0<n.xa-n.K&&r[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=Et(c(n.Va,n),6e3));Gt(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((t.L||n.g==t)&&Ze(n),!A(e))for(r=n.Ba.g.parse(e),e=0;e<r.length;e++){let c=r[e];const h=c[0];if(!(h<=n.K))if(n.K=h,c=c[1],2==n.I)if("c"==c[0]){n.M=c[1],n.ba=c[2];const e=c[3];null!=e&&(n.ka=e,n.j.info("VER="+n.ka));const r=c[4];null!=r&&(n.za=r,n.j.info("SVER="+n.za));const h=c[5];null!=h&&"number"===typeof h&&h>0&&(i=1.5*h,n.O=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=t.g;if(u){const t=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.h;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Qt(s,s.h),s.h=null))}if(i.G){const t=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.wa=t,re(i.J,i.G,t))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-t.F,n.j.info("Handshake RTT: "+n.T+"ms"));var o=t;if((i=n).na=sn(i,i.L?i.ba:null,i.W),o.L){Xt(i.h,o);var a=o,l=i.O;l&&(a.H=l),a.D&&(jt(a),Ut(a)),i.g=o}else Qe(i);n.i.length>0&&Ke(n)}else"stop"!=c[0]&&"close"!=c[0]||nn(n,7);else 3==n.I&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?nn(n,7):He(n):"noop"!=c[0]&&n.l&&n.l.qa(c),n.A=0)}yt()}catch(h){}}Rt.prototype.ba=function(t){t=t.target;const e=this.O;e&&3==Ue(t)?e.j():this.Y(t)},Rt.prototype.Y=function(t){try{if(t==this.g)t:{const c=Ue(this.g),l=this.g.ya();this.g.ca();if(!(c<3)&&(3!=c||this.g&&(this.h.h||this.g.la()||Fe(this.g)))){this.K||4!=c||7==l||yt(),jt(this);var e=this.g.ca();this.X=e;var n=function(t){if(!xt(t))return t.g.la();const e=Fe(t.g);if(""===e)return"";let n="";const i=e.length,r=4==Ue(t.g);if(!t.h.i){if("undefined"===typeof TextDecoder)return Ht(t),Bt(t),"";t.h.i=new s.TextDecoder}for(let s=0;s<i;s++)t.h.h=!0,n+=t.h.i.decode(e[s],{stream:!(r&&s==i-1)});return e.length=0,t.h.g+=n,t.C=0,t.h.g}(this);if(this.o=200==e,function(t,e,n,i,r,s,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.i,this.v,this.B,this.l,this.S,c,e),this.o){if(this.U&&!this.L){e:{if(this.g){var i,r=this.g;if((i=r.g?r.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(i)){var o=i;break e}}o=null}if(!(t=o)){this.o=!1,this.m=3,wt(12),Ht(this),Bt(this);break t}bt(this.i,this.l,t,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qt(this,t)}if(this.R){let e;for(t=!0;!this.K&&this.C<n.length;){if(e=Vt(this,n),e==Dt){4==c&&(this.m=4,wt(14),t=!1),bt(this.i,this.l,null,"[Incomplete Response]");break}if(e==Pt){this.m=4,wt(15),bt(this.i,this.l,n,"[Invalid Chunk]"),t=!1;break}bt(this.i,this.l,e,null),qt(this,e)}if(xt(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=c||0!=n.length||this.h.h||(this.m=1,wt(16),t=!1),this.o=this.o&&t,t){if(n.length>0&&!this.W){this.W=!0;var a=this.j;a.g==this&&a.aa&&!a.P&&(a.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ye(a),a.P=!0,wt(11))}}else bt(this.i,this.l,n,"[Invalid Chunked Response]"),Ht(this),Bt(this)}else bt(this.i,this.l,n,null),qt(this,n);4==c&&Ht(this),this.o&&!this.K&&(4==c?tn(this.j,this):(this.o=!1,Ut(this)))}else(function(t){const e={};t=(t.g&&Ue(t)>=2&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(A(t[i]))continue;var n=Nt(t[i]);const r=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,function(t){return t.join(", ")})})(this.g),400==e&&n.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),Ht(this),Bt(this)}}}catch(Rs){}},Rt.prototype.cancel=function(){this.K=!0,Ht(this)},Rt.prototype.aa=function(){this.D=null;const t=Date.now();t-this.T>=0?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.i,this.B),2!=this.M&&(yt(),wt(17)),Ht(this),this.m=2,Bt(this)):Ft(this,this.T-t)};var zt=class{constructor(t,e){this.g=t,this.map=e}};function Kt(t){this.l=t||10,s.PerformanceNavigationTiming?t=(t=s.performance.getEntriesByType("navigation")).length>0&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Wt(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Gt(t){return t.h?1:t.g?t.g.size:0}function Jt(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Qt(t,e){t.g?t.g.add(e):t.h=e}function Xt(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Yt(t){if(null!=t.h)return t.i.concat(t.h.G);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.G);return e}return d(t.i)}Kt.prototype.cancel=function(){if(this.i=Yt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var $t=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zt(t){let e;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,t instanceof Zt?(this.l=t.l,ee(this,t.j),this.o=t.o,this.g=t.g,ne(this,t.u),this.h=t.h,ie(this,_e(t.i)),this.m=t.m):t&&(e=String(t).match($t))?(this.l=!1,ee(this,e[1]||"",!0),this.o=oe(e[2]||""),this.g=oe(e[3]||"",!0),ne(this,e[4]),this.h=oe(e[5]||"",!0),ie(this,e[6]||"",!0),this.m=oe(e[7]||"")):(this.l=!1,this.i=new pe(null,this.l))}function te(t){return new Zt(t)}function ee(t,e,n){t.j=n?oe(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ne(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.u=e}else t.u=null}function ie(t,e,n){e instanceof pe?(t.i=e,function(t,e){e&&!t.j&&(ge(t),t.i=null,t.g.forEach(function(t,e){const n=e.toLowerCase();e!=n&&(me(this,e),we(this,n,t))},t)),t.j=e}(t.i,t.l)):(n||(e=ae(e,de)),t.i=new pe(e,t.l))}function re(t,e,n){t.i.set(e,n)}function se(t){return re(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function oe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ae(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,ce),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ce(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Zt.prototype.toString=function(){const t=[];var e=this.j;e&&t.push(ae(e,le,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.o)&&t.push(ae(e,le,!0),"@"),t.push(kt(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&t.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(ae(n,"/"==n.charAt(0)?ue:he,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.m)&&t.push("#",ae(n,fe)),t.join("")},Zt.prototype.resolve=function(t){const e=te(this);let n=!!t.j;n?ee(e,t.j):n=!!t.o,n?e.o=t.o:n=!!t.g,n?e.g=t.g:n=null!=t.u;var i=t.h;if(n)ne(e,t.u);else if(n=!!t.h){if("/"!=i.charAt(0))if(this.g&&!this.h)i="/"+i;else{var r=e.h.lastIndexOf("/");-1!=r&&(i=e.h.slice(0,r+1)+i)}if(".."==(r=i)||"."==r)i="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");const t=[];for(let e=0;e<r.length;){const n=r[e++];"."==n?i&&e==r.length&&t.push(""):".."==n?((t.length>1||1==t.length&&""!=t[0])&&t.pop(),i&&e==r.length&&t.push("")):(t.push(n),i=!0)}i=t.join("/")}else i=r}return n?e.h=i:n=""!==t.i.toString(),n?ie(e,_e(t.i)):n=!!t.m,n&&(e.m=t.m),e};var le=/[#\/\?@]/g,he=/[#\?:]/g,ue=/[#\?]/g,de=/[#\?@]/g,fe=/#/g;function pe(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ge(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(let n=0;n<t.length;n++){const i=t[n].indexOf("=");let r,s=null;i>=0?(r=t[n].substring(0,i),s=t[n].substring(i+1)):r=t[n],e(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function me(t,e){ge(t),e=Ee(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function ye(t,e){return ge(t),e=Ee(t,e),t.g.has(e)}function ve(t,e){ge(t);let n=[];if("string"===typeof e)ye(t,e)&&(n=n.concat(t.g.get(Ee(t,e))));else for(t=Array.from(t.g.values()),e=0;e<t.length;e++)n=n.concat(t[e]);return n}function we(t,e,n){me(t,e),n.length>0&&(t.i=null,t.g.set(Ee(t,e),d(n)),t.h+=n.length)}function _e(t){const e=new pe;return e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),e}function Ee(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Ie(t,e,n,i,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),i(n)}catch(s){}}function be(){this.g=new at}function Te(t){this.i=t.Sb||null,this.h=t.ab||!1}function Se(t,e){Y.call(this),this.H=t,this.o=e,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Ae(t){t.j.read().then(t.Ma.bind(t)).catch(t.ga.bind(t))}function Ce(t){t.readyState=4,t.l=null,t.j=null,t.B=null,ke(t)}function ke(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Ne(t){let e="";return P(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}function Re(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Ne(n),"string"===typeof t?null!=n&&kt(n):re(t,e,n))}function Oe(t){Y.call(this),this.headers=new Map,this.L=t||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(t=pe.prototype).add=function(t,e){ge(this),this.i=null,t=Ee(this,t);let n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},t.forEach=function(t,e){ge(this),this.g.forEach(function(n,i){n.forEach(function(n){t.call(e,n,i,this)},this)},this)},t.set=function(t,e){return ge(this),this.i=null,ye(this,t=Ee(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},t.get=function(t,e){return t&&(t=ve(this,t)).length>0?String(t[0]):e},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(let i=0;i<e.length;i++){var n=e[i];const r=kt(n);n=ve(this,n);for(let e=0;e<n.length;e++){let i=r;""!==n[e]&&(i+="="+kt(n[e])),t.push(i)}}return this.i=t.join("&")},h(Te,ct),Te.prototype.g=function(){return new Se(this.i,this.h)},h(Se,Y),(t=Se.prototype).open=function(t,e){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=t,this.D=e,this.readyState=1,ke(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const e={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};t&&(e.body=t),(this.H||s).fetch(new Request(this.D,e)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Ce(this)),this.readyState=0},t.Pa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ke(this)),this.g&&(this.readyState=3,ke(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ae(this)}else t.text().then(this.Oa.bind(this),this.ga.bind(this))},t.Ma=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var e=t.value?t.value:new Uint8Array(0);(e=this.B.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ce(this):ke(this),3==this.readyState&&Ae(this)}},t.Oa=function(t){this.g&&(this.response=this.responseText=t,Ce(this))},t.Na=function(t){this.g&&(this.response=t,Ce(this))},t.ga=function(){this.g&&Ce(this)},t.setRequestHeader=function(t,e){this.A.append(t,e)},t.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Se.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}}),h(Oe,Y);var Pe=/^https?$/i,De=["POST","PUT"];function Le(t,e){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=e,t.o=5,Me(t),Ve(t)}function Me(t){t.A||(t.A=!0,$(t,"complete"),$(t,"error"))}function xe(t){if(t.h&&"undefined"!=typeof r)if(t.v&&4==Ue(t))setTimeout(t.Ca.bind(t),0);else if($(t,"readystatechange"),4==Ue(t)){t.h=!1;try{const r=t.ca();t:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===r){let e=String(t.D).match($t)[1]||null;!e&&s.self&&s.self.location&&(e=s.self.location.protocol.slice(0,-1)),i=!Pe.test(e?e.toLowerCase():"")}n=i}if(n)$(t,"complete"),$(t,"success");else{t.o=6;try{var o=Ue(t)>2?t.g.statusText:""}catch(a){o=""}t.l=o+" ["+t.ca()+"]",Me(t)}}finally{Ve(t)}}}function Ve(t,e){if(t.g){t.m&&(clearTimeout(t.m),t.m=null);const i=t.g;t.g=null,e||$(t,"ready");try{i.onreadystatechange=null}catch(n){}}}function Ue(t){return t.g?t.g.readyState:0}function Fe(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.F){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function je(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Be(t){this.za=0,this.i=[],this.j=new It,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=je("failFast",!1,t),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=je("baseRetryDelayMs",5e3,t),this.Za=je("retryDelaySeedMs",1e4,t),this.Ta=je("forwardChannelMaxRetries",2,t),this.va=je("forwardChannelRequestTimeoutMs",2e4,t),this.ma=t&&t.xmlHttpFactory||void 0,this.Ua=t&&t.Rb||void 0,this.Aa=t&&t.useFetchStreams||!1,this.O=void 0,this.L=t&&t.supportsCrossDomainXhr||!1,this.M="",this.h=new Kt(t&&t.concurrentRequestLimit),this.Ba=new be,this.S=t&&t.fastHandshake||!1,this.R=t&&t.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=t&&t.Pb||!1,t&&t.ua&&this.j.ua(),t&&t.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&t&&t.detectBufferingProxy||!1,this.ia=void 0,t&&t.longPollingTimeout&&t.longPollingTimeout>0&&(this.ia=t.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function He(t){if(ze(t),3==t.I){var e=t.V++,n=te(t.J);if(re(n,"SID",t.M),re(n,"RID",e),re(n,"TYPE","terminate"),Ge(t,n),(e=new Rt(t,t.j,e)).M=2,e.A=se(te(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(e.A.toString(),"")}catch(i){}!n&&s.Image&&((new Image).src=e.A,n=!0),n||(e.g=on(e.j,null),e.g.ea(e.A)),e.F=Date.now(),Ut(e)}rn(t)}function qe(t){t.g&&(Ye(t),t.g.cancel(),t.g=null)}function ze(t){qe(t),t.v&&(s.clearTimeout(t.v),t.v=null),Ze(t),t.h.cancel(),t.m&&("number"===typeof t.m&&s.clearTimeout(t.m),t.m=null)}function Ke(t){if(!Wt(t.h)&&!t.m){t.m=!0;var e=t.Ea;v||E(),w||(v(),w=!0),_.add(e,t),t.D=0}}function We(t,e){var n;n=e?e.l:t.V++;const i=te(t.J);re(i,"SID",t.M),re(i,"RID",n),re(i,"AID",t.K),Ge(t,i),t.u&&t.o&&Re(i,t.u,t.o),n=new Rt(t,t.j,n,t.D+1),null===t.u&&(n.J=t.o),e&&(t.i=e.G.concat(t.i)),e=Je(t,n,1e3),n.H=Math.round(.5*t.va)+Math.round(.5*t.va*Math.random()),Qt(t.h,n),Lt(n,i,e)}function Ge(t,e){t.H&&P(t.H,function(t,n){re(e,n,t)}),t.l&&P({},function(t,n){re(e,n,t)})}function Je(t,e,n){n=Math.min(t.i.length,n);const i=t.l?c(t.l.Ka,t.l,t):null;t:{var r=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?n>0?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let c=!0;for(let l=0;l<n;l++){var s=r[l].g;const n=r[l].map;if((s-=e)<0)e=Math.max(0,r[l].g-100),c=!1;else try{s="req"+s+"_"||0;try{var a=n instanceof Map?n:Object.entries(n);for(const[e,n]of a){let i=n;o(n)&&(i=st(n)),t.push(s+e+"="+encodeURIComponent(i))}}catch($r){throw t.push(s+"type="+encodeURIComponent("_badmap")),$r}}catch($r){i&&i(n)}}if(c){a=t.join("&");break t}}a=void 0}return t=t.i.splice(0,n),e.G=t,a}function Qe(t){if(!t.g&&!t.v){t.Y=1;var e=t.Da;v||E(),w||(v(),w=!0),_.add(e,t),t.A=0}}function Xe(t){return!(t.g||t.v||t.A>=3)&&(t.Y++,t.v=Et(c(t.Da,t),en(t,t.A)),t.A++,!0)}function Ye(t){null!=t.B&&(s.clearTimeout(t.B),t.B=null)}function $e(t){t.g=new Rt(t,t.j,"rpc",t.Y),null===t.u&&(t.g.J=t.o),t.g.P=0;var e=te(t.na);re(e,"RID","rpc"),re(e,"SID",t.M),re(e,"AID",t.K),re(e,"CI",t.F?"0":"1"),!t.F&&t.ia&&re(e,"TO",t.ia),re(e,"TYPE","xmlhttp"),Ge(t,e),t.u&&t.o&&Re(e,t.u,t.o),t.O&&(t.g.H=t.O);var n=t.g;t=t.ba,n.M=1,n.A=se(te(e)),n.u=null,n.R=!0,Mt(n,t)}function Ze(t){null!=t.C&&(s.clearTimeout(t.C),t.C=null)}function tn(t,e){var n=null;if(t.g==e){Ze(t),Ye(t),t.g=null;var i=2}else{if(!Jt(t.h,e))return;n=e.G,Xt(t.h,e),i=1}if(0!=t.I)if(e.o)if(1==i){n=e.u?e.u.length:0,e=Date.now()-e.F;var r=t.D;$(i=gt(),new _t(i,n)),Ke(t)}else Qe(t);else if(3==(r=e.m)||0==r&&e.X>0||!(1==i&&function(t,e){return!(Gt(t.h)>=t.h.j-(t.m?1:0))&&(t.m?(t.i=e.G.concat(t.i),!0):!(1==t.I||2==t.I||t.D>=(t.Sa?0:t.Ta))&&(t.m=Et(c(t.Ea,t,e),en(t,t.D)),t.D++,!0))}(t,e)||2==i&&Xe(t)))switch(n&&n.length>0&&(e=t.h,e.i=e.i.concat(n)),r){case 1:nn(t,5);break;case 4:nn(t,10);break;case 3:nn(t,6);break;default:nn(t,2)}}function en(t,e){let n=t.Qa+Math.floor(Math.random()*t.Za);return t.isActive()||(n*=2),n*e}function nn(t,e){if(t.j.info("Error code "+e),2==e){var n=c(t.bb,t),i=t.Ua;const e=!i;i=new Zt(i||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ee(i,"https"),se(i),e?function(t,e){const n=new It;if(s.Image){const i=new Image;i.onload=l(Ie,n,"TestLoadImage: loaded",!0,e,i),i.onerror=l(Ie,n,"TestLoadImage: error",!1,e,i),i.onabort=l(Ie,n,"TestLoadImage: abort",!1,e,i),i.ontimeout=l(Ie,n,"TestLoadImage: timeout",!1,e,i),s.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}(i.toString(),n):function(t,e){new It;const n=new AbortController,i=setTimeout(()=>{n.abort(),Ie(0,0,!1,e)},1e4);fetch(t,{signal:n.signal}).then(t=>{clearTimeout(i),t.ok?Ie(0,0,!0,e):Ie(0,0,!1,e)}).catch(()=>{clearTimeout(i),Ie(0,0,!1,e)})}(i.toString(),n)}else wt(2);t.I=0,t.l&&t.l.pa(e),rn(t),ze(t)}function rn(t){if(t.I=0,t.ja=[],t.l){const e=Yt(t.h);0==e.length&&0==t.i.length||(f(t.ja,e),f(t.ja,t.i),t.h.i.length=0,d(t.i),t.i.length=0),t.l.oa()}}function sn(t,e,n){var i=n instanceof Zt?te(n):new Zt(n);if(""!=i.g)e&&(i.g=e+"."+i.g),ne(i,i.u);else{var r=s.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;const t=new Zt(null);i&&ee(t,i),e&&(t.g=e),r&&ne(t,r),n&&(t.h=n),i=t}return n=t.G,e=t.wa,n&&e&&re(i,n,e),re(i,"VER",t.ka),Ge(t,i),i}function on(t,e,n){if(e&&!t.L)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Aa&&!t.ma?new Oe(new Te({ab:n})):new Oe(t.ma)).Fa(t.L),e}function an(){}function cn(){}function ln(t,e){Y.call(this),this.g=new Be(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.sa&&(t?t["X-WebChannel-Client-Profile"]=e.sa:t={"X-WebChannel-Client-Profile":e.sa}),this.g.U=t,(t=e&&e.Qb)&&!A(t)&&(this.g.u=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!A(e)&&(this.g.G=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new dn(this)}function hn(t){ut.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function un(){dt.call(this),this.status=1}function dn(t){this.g=t}(t=Oe.prototype).Fa=function(t){this.H=t},t.ea=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Tt.g(),this.g.onreadystatechange=u(c(this.Ca,this));try{this.B=!0,this.g.open(e,String(t),!0),this.B=!1}catch(o){return void Le(this,o)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find(t=>"content-type"==t.toLowerCase()),r=s.FormData&&t instanceof s.FormData,!(Array.prototype.indexOf.call(De,e,void 0)>=0)||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(t),this.v=!1}catch(o){Le(this,o)}},t.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=t||7,$(this,"complete"),$(this,"abort"),Ve(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ve(this,!0)),Oe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?xe(this):this.Xa())},t.Xa=function(){xe(this)},t.isActive=function(){return!!this.g},t.ca=function(){try{return Ue(this)>2?this.g.status:-1}catch(t){return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},t.La=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ot(e)}},t.ya=function(){return this.o},t.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(t=Be.prototype).ka=8,t.I=1,t.connect=function(t,e,n,i){wt(0),this.W=t,this.H=e||{},n&&void 0!==i&&(this.H.OSID=n,this.H.OAID=i),this.F=this.X,this.J=sn(this,null,this.W),Ke(this)},t.Ea=function(t){if(this.m)if(this.m=null,1==this.I){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const r=new Rt(this,this.j,t);let s=this.o;if(this.U&&(s?(s=D(s),M(s,this.U)):s=this.U),null!==this.u||this.R||(r.J=s,s=null),this.S)t:{for(var e=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if((e+=i)>4096){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Je(this,r,e),re(n=te(this.J),"RID",t),re(n,"CVER",22),this.G&&re(n,"X-HTTP-Session-Id",this.G),Ge(this,n),s&&(this.R?e="headers="+kt(Ne(s))+"&"+e:this.u&&Re(n,this.u,s)),Qt(this.h,r),this.Ra&&re(n,"TYPE","init"),this.S?(re(n,"$req",e),re(n,"SID","null"),r.U=!0,Lt(r,n,null)):Lt(r,n,e),this.I=2}}else 3==this.I&&(t?We(this,t):0==this.i.length||Wt(this.h)||We(this))},t.Da=function(){if(this.v=null,$e(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var t=4*this.T;this.j.info("BP detection timer enabled: "+t),this.B=Et(c(this.Wa,this),t)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),qe(this),$e(this))},t.Va=function(){null!=this.C&&(this.C=null,qe(this),Xe(this),wt(19))},t.bb=function(t){t?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=an.prototype).ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){},cn.prototype.g=function(t,e){return new ln(t,e)},h(ln,Y),ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){He(this.g)},ln.prototype.o=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=st(t),t=n);e.i.push(new zt(e.Ya++,t)),3==e.I&&Ke(e)},ln.prototype.N=function(){this.g.l=null,delete this.j,He(this.g),delete this.g,ln.Z.N.call(this)},h(hn,ut),h(un,dt),h(dn,an),dn.prototype.ra=function(){$(this.g,"a")},dn.prototype.qa=function(t){$(this.g,new hn(t))},dn.prototype.pa=function(t){$(this.g,new un)},dn.prototype.oa=function(){$(this.g,"b")},cn.prototype.createWebChannel=cn.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,Jr=Xr.createWebChannelTransport=function(){return new cn},Gr=Xr.getStatEventTarget=function(){return gt()},Wr=Xr.Event=ft,Kr=Xr.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},St.NO_ERROR=0,St.TIMEOUT=8,St.HTTP_ERROR=6,zr=Xr.ErrorCode=St,At.COMPLETE="complete",qr=Xr.EventType=At,lt.EventType=ht,ht.OPEN="a",ht.CLOSE="b",ht.ERROR="c",ht.MESSAGE="d",Y.prototype.listen=Y.prototype.J,Hr=Xr.WebChannel=lt,Xr.FetchXmlHttpFactory=Te,Oe.prototype.listenOnce=Oe.prototype.K,Oe.prototype.getLastError=Oe.prototype.Ha,Oe.prototype.getLastErrorCode=Oe.prototype.ya,Oe.prototype.getStatus=Oe.prototype.ca,Oe.prototype.getResponseJson=Oe.prototype.La,Oe.prototype.getResponseText=Oe.prototype.la,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Fa,Br=Xr.XhrIo=Oe}).apply("undefined"!==typeof Qr?Qr:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Yr="@firebase/firestore",$r="4.9.2";class Zr{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Zr.UNAUTHENTICATED=new Zr(null),Zr.GOOGLE_CREDENTIALS=new Zr("google-credentials-uid"),Zr.FIRST_PARTY=new Zr("first-party-uid"),Zr.MOCK_USER=new Zr("mock-user");let ts="12.3.0";const es=new Q("@firebase/firestore");function ns(){return es.logLevel}function is(t){if(es.logLevel<=z.DEBUG){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(os);es.debug("Firestore (".concat(ts,"): ").concat(t),...r)}}function rs(t){if(es.logLevel<=z.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(os);es.error("Firestore (".concat(ts,"): ").concat(t),...r)}}function ss(t){if(es.logLevel<=z.WARN){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];const r=n.map(os);es.warn("Firestore (".concat(ts,"): ").concat(t),...r)}}function os(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function as(t,e,n){let i="Unexpected state";"string"==typeof e?i=e:n=e,cs(t,i,n)}function cs(t,e,n){let i="FIRESTORE (".concat(ts,") INTERNAL ASSERTION FAILED: ").concat(e," (ID: ").concat(t.toString(16),")");if(void 0!==n)try{i+=" CONTEXT: "+JSON.stringify(n)}catch(t){i+=" CONTEXT: "+n}throw rs(i),new Error(i)}function ls(t,e,n,i){let r="Unexpected state";"string"==typeof n?r=n:i=n,t||cs(e,r,i)}function hs(t,e){return t}const us={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ds extends k{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class fs{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class ps{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))}}class gs{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Zr.UNAUTHENTICATED))}shutdown(){}}class ms{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class ys{constructor(t){this.t=t,this.currentUser=Zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){ls(void 0===this.o,42304);let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new fs;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new fs,t.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const e=r;t.enqueueRetryable(async()=>{await e.promise,await i(this.currentUser)})},o=t=>{is("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(t=>o(t)),setTimeout(()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(is("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new fs)}},0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(e=>this.i!==t?(is("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(ls("string"==typeof e.accessToken,31837,{l:e}),new ps(e.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ls(null===t||"string"==typeof t,2055,{h:t}),new Zr(t)}}class vs{constructor(t,e,n){this.P=t,this.T=e,this.I=n,this.type="FirstParty",this.user=Zr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ws{constructor(t,e,n){this.P=t,this.T=e,this.I=n}getToken(){return Promise.resolve(new vs(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(Zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _s{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Es{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xt(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){ls(void 0===this.o,3512);const n=t=>{null!=t.error&&is("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(t.error.message));const n=t.token!==this.m;return this.m=t.token,is("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable(()=>n(e))};const i=t=>{is("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(t=>i(t)),setTimeout(()=>{if(!this.appCheck){const t=this.V.getImmediate({optional:!0});t?i(t):is("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new _s(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(t=>t?(ls("string"==typeof t.token,44558,{tokenResult:t}),this.m=t.token,new _s(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Is(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}class bs{static newId(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=Is(40);for(let i=0;i<n.length;++i)e.length<20&&n[i]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return e}}function Ts(t,e){return t<e?-1:t>e?1:0}function Ss(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.charAt(i),r=e.charAt(i);if(n!==r)return ks(n)===ks(r)?Ts(n,r):ks(n)?1:-1}return Ts(t.length,e.length)}const As=55296,Cs=57343;function ks(t){const e=t.charCodeAt(0);return e>=As&&e<=Cs}function Ns(t,e,n){return t.length===e.length&&t.every((t,i)=>n(t,e[i]))}const Rs="__name__";class Os{constructor(t,e,n){void 0===e?e=0:e>t.length&&as(637,{offset:e,range:t.length}),void 0===n?n=t.length-e:n>t.length-e&&as(1746,{length:n,range:t.length-e}),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Os.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Os?t.forEach(t=>{e.push(t)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=Os.compareSegments(t.get(i),e.get(i));if(0!==n)return n}return Ts(t.length,e.length)}static compareSegments(t,e){const n=Os.isNumericId(t),i=Os.isNumericId(e);return n&&!i?-1:!n&&i?1:n&&i?Os.extractNumericId(t).compare(Os.extractNumericId(e)):Ss(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ur.fromString(t.substring(4,t.length-2))}}class Ps extends Os{construct(t,e,n){return new Ps(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const t=[];for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n){if(r.indexOf("//")>=0)throw new ds(us.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));t.push(...r.split("/").filter(t=>t.length>0))}return new Ps(t)}static emptyPath(){return new Ps([])}}const Ds=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ls extends Os{construct(t,e,n){return new Ls(t,e,n)}static isValidIdentifier(t){return Ds.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ls.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Rs}static keyField(){return new Ls([Rs])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new ds(us.INVALID_ARGUMENT,"Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new ds(us.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new ds(us.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new ds(us.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ls(e)}static emptyPath(){return new Ls([])}}class Ms{constructor(t){this.path=t}static fromPath(t){return new Ms(Ps.fromString(t))}static fromName(t){return new Ms(Ps.fromString(t).popFirst(5))}static empty(){return new Ms(Ps.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Ps.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Ps.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ms(new Ps(t.slice()))}}function xs(t,e,n){if(!n)throw new ds(us.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(e,"."))}function Vs(t){if(Ms.isDocumentKey(t))throw new ds(us.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function Us(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Fs(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?"a custom ".concat(e," object"):"an object"}}return"function"==typeof t?"a function":as(12329,{type:typeof t})}function js(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ds(us.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fs(t);throw new ds(us.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(n))}}return t}function Bs(t,e){const n={typeString:t};return e&&(n.value=e),n}function Hs(t,e){if(!Us(t))throw new ds(us.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n="JSON missing required field: '".concat(i,"'");break}const o=t[i];if(r&&typeof o!==r){n="JSON field '".concat(i,"' must be a ").concat(r,".");break}if(void 0!==s&&o!==s.value){n="Expected '".concat(i,"' field to equal '").concat(s.value,"'");break}}if(n)throw new ds(us.INVALID_ARGUMENT,n);return!0}const qs=-62135596800,zs=1e6;class Ks{static now(){return Ks.fromMillis(Date.now())}static fromDate(t){return Ks.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor((t-1e3*e)*zs);return new Ks(e,n)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ds(us.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ds(us.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<qs)throw new ds(us.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ds(us.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zs}_compareTo(t){return this.seconds===t.seconds?Ts(this.nanoseconds,t.nanoseconds):Ts(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ks._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Hs(t,Ks._jsonSchema))return new Ks(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-qs;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ks._jsonSchemaVersion="firestore/timestamp/1.0",Ks._jsonSchema={type:Bs("string",Ks._jsonSchemaVersion),seconds:Bs("number"),nanoseconds:Bs("number")};class Ws{static fromTimestamp(t){return new Ws(t)}static min(){return new Ws(new Ks(0,0))}static max(){return new Ws(new Ks(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Gs=-1;class Js{constructor(t,e,n,i){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=i}}Js.UNKNOWN_ID=-1;function Qs(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Ws.fromTimestamp(1e9===i?new Ks(n+1,0):new Ks(n,i));return new Ys(r,Ms.empty(),e)}function Xs(t){return new Ys(t.readTime,t.key,Gs)}class Ys{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Ys(Ws.min(),Ms.empty(),Gs)}static max(){return new Ys(Ws.max(),Ms.empty(),Gs)}}function $s(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Ms.comparator(t.documentKey,e.documentKey),0!==n?n:Ts(t.largestBatchId,e.largestBatchId))}class Zs{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class to{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&as(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new to((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof to?e:to.resolve(e)}catch(t){return to.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):to.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):to.reject(e)}static resolve(t){return new to((e,n)=>{e(t)})}static reject(t){return new to((e,n)=>{n(t)})}static waitFor(t){return new to((e,n)=>{let i=0,r=0,s=!1;t.forEach(t=>{++i,t.next(()=>{++r,s&&r===i&&e()},t=>n(t))}),s=!0,r===i&&e()})}static or(t){let e=to.resolve(!1);for(const n of t)e=e.next(t=>t?to.resolve(t):n());return e}static forEach(t,e){const n=[];return t.forEach((t,i)=>{n.push(e.call(this,t,i))}),this.waitFor(n)}static mapArray(t,e){return new to((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const c=a;e(t[c]).next(t=>{s[c]=t,++o,o===r&&n(s)},t=>i(t))}})}static doWhile(t,e){return new to((n,i)=>{const r=()=>{!0===t()?e().next(()=>{r()},i):n()};r()})}}function eo(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function no(t){return"IndexedDbTransactionError"===t.name}class io{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ae(t),this.ue=t=>e.writeSequenceNumber(t))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}io.ce=-1;const ro=-1;function so(t){return null==t}function oo(t){return 0===t&&1/t==-1/0}const ao="remoteDocuments",co="owner",lo="mutationQueues",ho="mutations";const uo="documentMutations",fo="remoteDocumentsV14",po="remoteDocumentGlobal",go="targets",mo="targetDocuments",yo="targetGlobal",vo="collectionParents",wo="clientMetadata",_o="bundles",Eo="namedQueries",Io="indexConfiguration",bo="indexState",To="indexEntries",So="documentOverlays",Ao="globals",Co=[lo,ho,uo,ao,go,co,yo,mo,wo,po,vo,_o,Eo],ko=[lo,ho,uo,fo,go,co,yo,mo,wo,po,vo,_o,Eo,So],No=ko,Ro=[...No,Io,bo,To];function Oo(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Po(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Do(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Lo{constructor(t,e){this.comparator=t,this.root=e||xo.EMPTY}insert(t,e){return new Lo(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,xo.BLACK,null,null))}remove(t){return new Lo(this.comparator,this.root.remove(t,this.comparator).copy(null,null,xo.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){const t=[];return this.inorderTraversal((e,n)=>(t.push("".concat(e,":").concat(n)),!1)),"{".concat(t.join(", "),"}")}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Mo(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Mo(this.root,t,this.comparator,!1)}getReverseIterator(){return new Mo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Mo(this.root,t,this.comparator,!0)}}class Mo{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class xo{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:xo.RED,this.left=null!=i?i:xo.EMPTY,this.right=null!=r?r:xo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new xo(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return xo.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,xo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,xo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw as(43730,{key:this.key,value:this.value});if(this.right.isRed())throw as(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw as(27949);return t+(this.isRed()?0:1)}}xo.EMPTY=null,xo.RED=!0,xo.BLACK=!1,xo.EMPTY=new class{constructor(){this.size=0}get key(){throw as(57766)}get value(){throw as(16141)}get color(){throw as(16727)}get left(){throw as(29726)}get right(){throw as(36894)}copy(t,e,n,i,r){return this}insert(t,e,n){return new xo(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Vo{constructor(t){this.comparator=t,this.data=new Lo(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Uo(this.data.getIterator())}getIteratorFrom(t){return new Uo(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(t=>{e=e.add(t)}),e}isEqual(t){if(!(t instanceof Vo))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Vo(this.comparator);return e.data=t,e}}class Uo{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Fo{constructor(t){this.fields=t,t.sort(Ls.comparator)}static empty(){return new Fo([])}unionWith(t){let e=new Vo(Ls.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new Fo(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Ns(this.fields,t.fields,(t,e)=>t.isEqual(e))}}class jo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Bo{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new jo("Invalid base64 string: "+t):t}}(t);return new Bo(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Bo(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ts(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Bo.EMPTY_BYTE_STRING=new Bo("");const Ho=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qo(t){if(ls(!!t,39018),"string"==typeof t){let e=0;const n=Ho.exec(t);if(ls(!!n,46558,{timestamp:t}),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:zo(t.seconds),nanos:zo(t.nanos)}}function zo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ko(t){return"string"==typeof t?Bo.fromBase64String(t):Bo.fromUint8Array(t)}const Wo="server_timestamp",Go="__type__",Jo="__previous_value__",Qo="__local_write_time__";function Xo(t){var e,n;return(null===(e=((null===t||void 0===t||null===(n=t.mapValue)||void 0===n?void 0:n.fields)||{})[Go])||void 0===e?void 0:e.stringValue)===Wo}function Yo(t){const e=t.mapValue.fields[Jo];return Xo(e)?Yo(e):e}function $o(t){const e=qo(t.mapValue.fields[Qo].timestampValue);return new Ks(e.seconds,e.nanos)}const Zo="(default)";class ta{constructor(t,e){this.projectId=t,this.database=e||Zo}static empty(){return new ta("","")}get isDefaultDatabase(){return this.database===Zo}isEqual(t){return t instanceof ta&&t.projectId===this.projectId&&t.database===this.database}}const ea="__type__",na="__max__",ia={mapValue:{fields:{__type__:{stringValue:na}}}},ra="__vector__",sa="value";function oa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xo(t)?4:wa(t)?9007199254740991:ya(t)?10:11:as(28295,{value:t})}function aa(t,e){if(t===e)return!0;const n=oa(t);if(n!==oa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $o(t).isEqual($o(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=qo(t.timestampValue),i=qo(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ko(t.bytesValue).isEqual(Ko(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return zo(t.geoPointValue.latitude)===zo(e.geoPointValue.latitude)&&zo(t.geoPointValue.longitude)===zo(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return zo(t.integerValue)===zo(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=zo(t.doubleValue),i=zo(e.doubleValue);return n===i?oo(n)===oo(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return Ns(t.arrayValue.values||[],e.arrayValue.values||[],aa);case 10:case 11:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Oo(n)!==Oo(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!aa(n[r],i[r])))return!1;return!0}(t,e);default:return as(52216,{left:t})}}function ca(t,e){return void 0!==(t.values||[]).find(t=>aa(t,e))}function la(t,e){if(t===e)return 0;const n=oa(t),i=oa(e);if(n!==i)return Ts(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ts(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=zo(t.integerValue||t.doubleValue),i=zo(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return ha(t.timestampValue,e.timestampValue);case 4:return ha($o(t),$o(e));case 5:return Ss(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Ko(t),i=Ko(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let r=0;r<n.length&&r<i.length;r++){const t=Ts(n[r],i[r]);if(0!==t)return t}return Ts(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=Ts(zo(t.latitude),zo(e.latitude));return 0!==n?n:Ts(zo(t.longitude),zo(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ua(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n,i,r,s;const o=t.fields||{},a=e.fields||{},c=null===(n=o[sa])||void 0===n?void 0:n.arrayValue,l=null===(i=a[sa])||void 0===i?void 0:i.arrayValue,h=Ts((null===c||void 0===c||null===(r=c.values)||void 0===r?void 0:r.length)||0,(null===l||void 0===l||null===(s=l.values)||void 0===s?void 0:s.length)||0);return 0!==h?h:ua(c,l)}(t.mapValue,e.mapValue);case 11:return function(t,e){if(t===ia.mapValue&&e===ia.mapValue)return 0;if(t===ia.mapValue)return 1;if(e===ia.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const t=Ss(i[o],s[o]);if(0!==t)return t;const e=la(n[i[o]],r[s[o]]);if(0!==e)return e}return Ts(i.length,s.length)}(t.mapValue,e.mapValue);default:throw as(23264,{he:n})}}function ha(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ts(t,e);const n=qo(t),i=qo(e),r=Ts(n.seconds,i.seconds);return 0!==r?r:Ts(n.nanos,i.nanos)}function ua(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const t=la(n[r],i[r]);if(t)return t}return Ts(n.length,i.length)}function da(t){return fa(t)}function fa(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=qo(t);return"time(".concat(e.seconds,",").concat(e.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return Ko(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return Ms.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return"geo(".concat(t.latitude,",").concat(t.longitude,")")}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=fa(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+="".concat(r,":").concat(fa(t.fields[r]));return n+"}"}(t.mapValue):as(61005,{value:t})}function pa(t){return!!t&&"integerValue"in t}function ga(t){return!!t&&"arrayValue"in t}function ma(t){return!!t&&"mapValue"in t}function ya(t){var e,n;return(null===(e=((null===t||void 0===t||null===(n=t.mapValue)||void 0===n?void 0:n.fields)||{})[ea])||void 0===e?void 0:e.stringValue)===ra}function va(t){if(t.geoPointValue)return{geoPointValue:a({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:a({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Po(t.mapValue.fields,(t,n)=>e.mapValue.fields[t]=va(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=va(t.arrayValue.values[n]);return e}return a({},t)}function wa(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===na}class _a{constructor(t){this.value=t}static empty(){return new _a({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!ma(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=va(e)}setAll(t){let e=Ls.emptyPath(),n={},i=[];t.forEach((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=va(t):i.push(r.lastSegment())});const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());ma(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return aa(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];ma(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Po(e,(e,n)=>t[e]=n);for(const i of n)delete t[i]}clone(){return new _a(va(this.value))}}class Ea{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new Ea(t,0,Ws.min(),Ws.min(),Ws.min(),_a.empty(),0)}static newFoundDocument(t,e,n,i){return new Ea(t,1,e,Ws.min(),n,i,0)}static newNoDocument(t,e){return new Ea(t,2,e,Ws.min(),Ws.min(),_a.empty(),0)}static newUnknownDocument(t,e){return new Ea(t,3,e,Ws.min(),Ws.min(),_a.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Ws.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=_a.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=_a.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ws.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Ea&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ea(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Ia{constructor(t,e){this.position=t,this.inclusive=e}}function ba(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?Ms.comparator(Ms.fromName(o.referenceValue),n.key):la(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Ta(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!aa(t.position[n],e.position[n]))return!1;return!0}class Sa{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=t,this.dir=e}}function Aa(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Ca{}class ka extends Ca{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new xa(t,e,n):"array-contains"===e?new ja(t,n):"in"===e?new Ba(t,n):"not-in"===e?new Ha(t,n):"array-contains-any"===e?new qa(t,n):new ka(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Va(t,n):new Ua(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&void 0===e.nullValue&&this.matchesComparison(la(e,this.value)):null!==e&&oa(this.value)===oa(e)&&this.matchesComparison(la(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return as(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Na extends Ca{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new Na(t,e)}matches(t){return Ra(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ra(t){return"and"===t.op}function Oa(t){return Pa(t)&&Ra(t)}function Pa(t){for(const e of t.filters)if(e instanceof Na)return!1;return!0}function Da(t){if(t instanceof ka)return t.field.canonicalString()+t.op.toString()+da(t.value);if(Oa(t))return t.filters.map(t=>Da(t)).join(",");{const e=t.filters.map(t=>Da(t)).join(",");return"".concat(t.op,"(").concat(e,")")}}function La(t,e){return t instanceof ka?function(t,e){return e instanceof ka&&t.op===e.op&&t.field.isEqual(e.field)&&aa(t.value,e.value)}(t,e):t instanceof Na?function(t,e){return e instanceof Na&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce((t,n,i)=>t&&La(n,e.filters[i]),!0)}(t,e):void as(19439)}function Ma(t){return t instanceof ka?function(t){return"".concat(t.field.canonicalString()," ").concat(t.op," ").concat(da(t.value))}(t):t instanceof Na?function(t){return t.op.toString()+" {"+t.getFilters().map(Ma).join(" ,")+"}"}(t):"Filter"}class xa extends ka{constructor(t,e,n){super(t,e,n),this.key=Ms.fromName(n.referenceValue)}matches(t){const e=Ms.comparator(t.key,this.key);return this.matchesComparison(e)}}class Va extends ka{constructor(t,e){super(t,"in",e),this.keys=Fa("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Ua extends ka{constructor(t,e){super(t,"not-in",e),this.keys=Fa("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Fa(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(t=>Ms.fromName(t.referenceValue))}class ja extends ka{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return ga(e)&&ca(e.arrayValue,this.value)}}class Ba extends ka{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&ca(this.value.arrayValue,e)}}class Ha extends ka{constructor(t,e){super(t,"not-in",e)}matches(t){if(ca(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&void 0===e.nullValue&&!ca(this.value.arrayValue,e)}}class qa extends ka{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!ga(e)||!e.arrayValue.values)&&e.arrayValue.values.some(t=>ca(this.value.arrayValue,t))}}class za{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.Te=null}}function Ka(t){return new za(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Wa(t){const e=hs(t);if(null===e.Te){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(t=>Da(t)).join(","),t+="|ob:",t+=e.orderBy.map(t=>function(t){return t.field.canonicalString()+t.dir}(t)).join(","),so(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(t=>da(t)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(t=>da(t)).join(",")),e.Te=t}return e.Te}function Ga(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Aa(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!La(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ta(t.startAt,e.startAt)&&Ta(t.endAt,e.endAt)}class Ja{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Qa(t,e,n,i,r,s,o,a){return new Ja(t,e,n,i,r,s,o,a)}function Xa(t){return new Ja(t)}function Ya(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function $a(t){return null!==t.collectionGroup}function Za(t){const e=hs(t);if(null===e.Ie){e.Ie=[];const t=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),t.add(r.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",i=function(t){let e=new Vo(Ls.comparator);return t.filters.forEach(t=>{t.getFlattenedFilters().forEach(t=>{t.isInequality()&&(e=e.add(t.field))})}),e}(e);i.forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Sa(i,n))}),t.has(Ls.keyField().canonicalString())||e.Ie.push(new Sa(Ls.keyField(),n))}return e.Ie}function tc(t){const e=hs(t);return e.Ee||(e.Ee=ec(e,Za(t))),e.Ee}function ec(t,e){if("F"===t.limitType)return Ka(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(t=>{const e="desc"===t.dir?"asc":"desc";return new Sa(t.field,e)});const n=t.endAt?new Ia(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ia(t.startAt.position,t.startAt.inclusive):null;return Ka(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function nc(t,e,n){return new Ja(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ic(t,e){return Ga(tc(t),tc(e))&&t.limitType===e.limitType}function rc(t){return"".concat(Wa(tc(t)),"|lt:").concat(t.limitType)}function sc(t){return"Query(target=".concat(function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: [".concat(t.filters.map(t=>Ma(t)).join(", "),"]")),so(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: [".concat(t.orderBy.map(t=>function(t){return"".concat(t.field.canonicalString()," (").concat(t.dir,")")}(t)).join(", "),"]")),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(t=>da(t)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(t=>da(t)).join(",")),"Target(".concat(e,")")}(tc(t)),"; limitType=").concat(t.limitType,")")}function oc(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Ms.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Za(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=ba(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,Za(t),e))&&!(t.endAt&&!function(t,e,n){const i=ba(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,Za(t),e))}(t,e)}function ac(t){return(e,n)=>{let i=!1;for(const r of Za(t)){const t=cc(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function cc(t,e,n){const i=t.field.isKeyField()?Ms.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?la(i,r):as(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return as(19790,{direction:t.dir})}}class lc{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Po(this.inner,(e,n)=>{for(const[i,r]of n)t(i,r)})}isEmpty(){return Do(this.inner)}size(){return this.innerSize}}const hc=new Lo(Ms.comparator);function uc(){return hc}const dc=new Lo(Ms.comparator);function fc(){let t=dc;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)t=t.insert(r.key,r);return t}function pc(t){let e=dc;return t.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function gc(){return yc()}function mc(){return yc()}function yc(){return new lc(t=>t.toString(),(t,e)=>t.isEqual(e))}new Lo(Ms.comparator);const vc=new Vo(Ms.comparator);function wc(){let t=vc;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)t=t.add(r);return t}const _c=new Vo(Ts);function Ec(){return _c}function Ic(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oo(e)?"-0":e}}function bc(t){return{integerValue:""+t}}class Tc{constructor(){this._=void 0}}function Sc(t,e,n){return t instanceof kc?function(t,e){const n={fields:{[Go]:{stringValue:Wo},[Qo]:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Xo(e)&&(e=Yo(e)),e&&(n.fields[Jo]=e),{mapValue:n}}(n,e):t instanceof Nc?Rc(t,e):t instanceof Oc?Pc(t,e):function(t,e){const n=Cc(t,e),i=Lc(n)+Lc(t.Ae);return pa(n)&&pa(t.Ae)?bc(i):Ic(t.serializer,i)}(t,e)}function Ac(t,e,n){return t instanceof Nc?Rc(t,e):t instanceof Oc?Pc(t,e):n}function Cc(t,e){return t instanceof Dc?function(t){return pa(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class kc extends Tc{}class Nc extends Tc{constructor(t){super(),this.elements=t}}function Rc(t,e){const n=Mc(e);for(const i of t.elements)n.some(t=>aa(t,i))||n.push(i);return{arrayValue:{values:n}}}class Oc extends Tc{constructor(t){super(),this.elements=t}}function Pc(t,e){let n=Mc(e);for(const i of t.elements)n=n.filter(t=>!aa(t,i));return{arrayValue:{values:n}}}class Dc extends Tc{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function Lc(t){return zo(t.integerValue||t.doubleValue)}function Mc(t){return ga(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class xc{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new xc}static exists(t){return new xc(void 0,t)}static updateTime(t){return new xc(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Vc(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Uc{}function Fc(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Jc(t.key,xc.none()):new qc(t.key,t.data,xc.none());{const n=t.data,i=_a.empty();let r=new Vo(Ls.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new zc(t.key,i,new Fo(r.toArray()),xc.none())}}function jc(t,e,n){t instanceof qc?function(t,e,n){const i=t.value.clone(),r=Wc(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof zc?function(t,e,n){if(!Vc(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=Wc(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(Kc(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Bc(t,e,n,i){return t instanceof qc?function(t,e,n,i){if(!Vc(t.precondition,e))return n;const r=t.value.clone(),s=Gc(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof zc?function(t,e,n,i){if(!Vc(t.precondition,e))return n;const r=Gc(t.fieldTransforms,i,e),s=e.data;return s.setAll(Kc(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map(t=>t.field))}(t,e,n,i):function(t,e,n){return Vc(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function Hc(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Ns(t,e,(t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Nc&&e instanceof Nc||t instanceof Oc&&e instanceof Oc?Ns(t.elements,e.elements,aa):t instanceof Dc&&e instanceof Dc?aa(t.Ae,e.Ae):t instanceof kc&&e instanceof kc}(t.transform,e.transform)}(t,e))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class qc extends Uc{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zc extends Uc{constructor(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Kc(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Wc(t,e,n){const i=new Map;ls(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Ac(o,a,n[r]))}return i}function Gc(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,Sc(t,s,e))}return i}class Jc extends Uc{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qc{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const e=this.mutations[i];e.key.isEqual(t.key)&&jc(e,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Bc(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Bc(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=mc();return this.mutations.forEach(i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=Fc(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(Ws.min())}),n}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),wc())}isEqual(t){return this.batchId===t.batchId&&Ns(this.mutations,t.mutations,(t,e)=>Hc(t,e))&&Ns(this.baseMutations,t.baseMutations,(t,e)=>Hc(t,e))}}class Xc{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}var Yc,$c;function Zc(t){if(void 0===t)return rs("GRPC error has no .code"),us.UNKNOWN;switch(t){case Yc.OK:return us.OK;case Yc.CANCELLED:return us.CANCELLED;case Yc.UNKNOWN:return us.UNKNOWN;case Yc.DEADLINE_EXCEEDED:return us.DEADLINE_EXCEEDED;case Yc.RESOURCE_EXHAUSTED:return us.RESOURCE_EXHAUSTED;case Yc.INTERNAL:return us.INTERNAL;case Yc.UNAVAILABLE:return us.UNAVAILABLE;case Yc.UNAUTHENTICATED:return us.UNAUTHENTICATED;case Yc.INVALID_ARGUMENT:return us.INVALID_ARGUMENT;case Yc.NOT_FOUND:return us.NOT_FOUND;case Yc.ALREADY_EXISTS:return us.ALREADY_EXISTS;case Yc.PERMISSION_DENIED:return us.PERMISSION_DENIED;case Yc.FAILED_PRECONDITION:return us.FAILED_PRECONDITION;case Yc.ABORTED:return us.ABORTED;case Yc.OUT_OF_RANGE:return us.OUT_OF_RANGE;case Yc.UNIMPLEMENTED:return us.UNIMPLEMENTED;case Yc.DATA_LOSS:return us.DATA_LOSS;default:return as(39323,{code:t})}}($c=Yc||(Yc={}))[$c.OK=0]="OK",$c[$c.CANCELLED=1]="CANCELLED",$c[$c.UNKNOWN=2]="UNKNOWN",$c[$c.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$c[$c.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$c[$c.NOT_FOUND=5]="NOT_FOUND",$c[$c.ALREADY_EXISTS=6]="ALREADY_EXISTS",$c[$c.PERMISSION_DENIED=7]="PERMISSION_DENIED",$c[$c.UNAUTHENTICATED=16]="UNAUTHENTICATED",$c[$c.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$c[$c.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$c[$c.ABORTED=10]="ABORTED",$c[$c.OUT_OF_RANGE=11]="OUT_OF_RANGE",$c[$c.UNIMPLEMENTED=12]="UNIMPLEMENTED",$c[$c.INTERNAL=13]="INTERNAL",$c[$c.UNAVAILABLE=14]="UNAVAILABLE",$c[$c.DATA_LOSS=15]="DATA_LOSS";new Ur([4294967295,4294967295],0);Error;class tl{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function el(t){return ls(!!t,49232),Ws.fromTimestamp(function(t){const e=qo(t);return new Ks(e.seconds,e.nanos)}(t))}function nl(t,e){const n=function(t){return new Ps(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function il(t){const e=Ps.fromString(t);return ls(ll(e),10190,{key:e.toString()}),e}function rl(t){const e=il(t);return 4===e.length?Ps.emptyPath():sl(e)}function sl(t){return ls(t.length>4&&"documents"===t.get(4),29091,{key:t.toString()}),t.popFirst(5)}function ol(t){let e=rl(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ls(1===i,65062);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=al(t);return e instanceof Na&&Oa(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map(t=>function(t){return new Sa(cl(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,so(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new Ia(n,e)}(n.startAt));let l=null;return n.endAt&&(l=function(t){const e=!t.before,n=t.values||[];return new Ia(n,e)}(n.endAt)),Qa(e,r,o,s,a,"F",c,l)}function al(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=cl(t.unaryFilter.field);return ka.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=cl(t.unaryFilter.field);return ka.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=cl(t.unaryFilter.field);return ka.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=cl(t.unaryFilter.field);return ka.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return as(61313);default:return as(60726)}}(t):void 0!==t.fieldFilter?function(t){return ka.create(cl(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return as(58110);default:return as(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return Na.create(t.compositeFilter.filters.map(t=>al(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return as(1026)}}(t.compositeFilter.op))}(t):as(30097,{filter:t})}function cl(t){return Ls.fromServerFormat(t.fieldPath)}function ll(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class hl{constructor(t){this.yt=t}}function ul(t){const e=ol({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?nc(e,e.limit,"L"):e}class dl{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(zo(t.integerValue));else if("doubleValue"in t){const n=zo(t.doubleValue);isNaN(n)?this.Ft(e,13):(this.Ft(e,15),oo(n)?e.Mt(0):e.Mt(n))}else if("timestampValue"in t){let n=t.timestampValue;this.Ft(e,20),"string"==typeof n&&(n=qo(n)),e.xt("".concat(n.seconds||"")),e.Mt(n.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(Ko(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Ft(e,45),e.Mt(n.latitude||0),e.Mt(n.longitude||0)}else"mapValue"in t?wa(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):ya(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):as(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const n=t.fields||{};this.Ft(e,55);for(const i of Object.keys(n))this.Ot(i,e),this.Ct(n[i],e)}kt(t,e){var n;const i=t.fields||{};this.Ft(e,53);const r=sa,s=(null===(n=i[r].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(e,15),e.Mt(zo(s)),this.Ot(r,e),this.Ct(i[r],e)}Qt(t,e){const n=t.values||[];this.Ft(e,50);for(const i of n)this.Ct(i,e)}Lt(t,e){this.Ft(e,37),Ms.fromName(t).path.forEach(t=>{this.Ft(e,60),this.Ut(t,e)})}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}dl.Kt=new dl;class fl{constructor(){this.Cn=new pl}addToCollectionParentIndex(t,e){return this.Cn.add(e),to.resolve()}getCollectionParents(t,e){return to.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return to.resolve()}deleteFieldIndex(t,e){return to.resolve()}deleteAllFieldIndexes(t){return to.resolve()}createTargetIndexes(t,e){return to.resolve()}getDocumentsMatchingTarget(t,e){return to.resolve(null)}getIndexType(t,e){return to.resolve(0)}getFieldIndexes(t,e){return to.resolve([])}getNextCollectionGroupToUpdate(t){return to.resolve(null)}getMinOffset(t,e){return to.resolve(Ys.min())}getMinOffsetFromCollectionGroup(t,e){return to.resolve(Ys.min())}updateCollectionGroup(t,e,n){return to.resolve()}updateIndexEntries(t,e){return to.resolve()}}class pl{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new Vo(Ps.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new Vo(Ps.comparator)).toArray()}}new Uint8Array(0);const gl=41943040;class ml{static withCacheSize(t){return new ml(t,ml.DEFAULT_COLLECTION_PERCENTILE,ml.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}}ml.DEFAULT_COLLECTION_PERCENTILE=10,ml.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ml.DEFAULT=new ml(gl,ml.DEFAULT_COLLECTION_PERCENTILE,ml.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ml.DISABLED=new ml(-1,0,0);class yl{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new yl(0)}static cr(){return new yl(-1)}}const vl=1048576;class wl{constructor(){this.changes=new lc(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ea.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?to.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class _l{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class El{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(n=i,this.remoteDocumentCache.getEntry(t,e))).next(t=>(null!==n&&Bc(n.mutation,t,Fo.empty(),Ks.now()),t))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(e=>this.getLocalViewOfDocuments(t,e,wc()).next(()=>e))}getLocalViewOfDocuments(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wc();const i=gc();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,n).next(t=>{let e=fc();return t.forEach((t,n)=>{e=e.insert(t,n.overlayedDocument)}),e}))}getOverlayedDocuments(t,e){const n=gc();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,wc()))}populateOverlays(t,e,n){const i=[];return n.forEach(t=>{e.has(t)||i.push(t)}),this.documentOverlayCache.getOverlays(t,i).next(t=>{t.forEach((t,n)=>{e.set(t,n)})})}computeViews(t,e,n,i){let r=uc();const s=yc(),o=yc();return e.forEach((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof zc)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),Bc(o.mutation,e,o.mutation.getFieldMask(),Ks.now())):s.set(e.key,Fo.empty())}),this.recalculateAndSaveOverlays(t,r).next(t=>(t.forEach((t,e)=>s.set(t,e)),e.forEach((t,e)=>{var n;return o.set(t,new _l(e,null!==(n=s.get(t))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(t,e){const n=yc();let i=new Lo((t,e)=>t-e),r=wc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(t=>{for(const r of t)r.keys().forEach(t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||Fo.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||wc()).add(t);i=i.insert(r.batchId,a)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,c=i.value,l=mc();c.forEach(t=>{if(!r.has(t)){const i=Fc(e.get(t),n.get(t));null!==i&&l.set(t,i),r=r.add(t)}}),s.push(this.documentOverlayCache.saveOverlays(t,a,l))}return to.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(e=>this.recalculateAndSaveOverlays(t,e))}getDocumentsMatchingQuery(t,e,n,i){return function(t){return Ms.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):$a(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next(r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):to.resolve(gc());let o=Gs,a=r;return s.next(e=>to.forEach(e,(e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?to.resolve():this.remoteDocumentCache.getEntry(t,e).next(t=>{a=a.insert(e,t)}))).next(()=>this.populateOverlays(t,e,r)).next(()=>this.computeViews(t,a,e,wc())).next(t=>({batchId:o,changes:pc(t)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Ms(e)).next(t=>{let e=fc();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let s=fc();return this.indexManager.getCollectionParents(t,r).next(o=>to.forEach(o,o=>{const a=function(t,e){return new Ja(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(r));return this.getDocumentsMatchingCollectionQuery(t,a,n,i).next(t=>{t.forEach((t,e)=>{s=s.insert(t,e)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i))).next(t=>{r.forEach((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,Ea.newInvalidDocument(i)))});let n=fc();return t.forEach((t,i)=>{const s=r.get(t);void 0!==s&&Bc(s.mutation,i,Fo.empty(),Ks.now()),oc(e,i)&&(n=n.insert(t,i))}),n})}}class Il{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return to.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:el(t.createTime)}}(e)),to.resolve()}getNamedQuery(t,e){return to.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,function(t){return{name:t.name,query:ul(t.bundledQuery),readTime:el(t.readTime)}}(e)),to.resolve()}}class bl{constructor(){this.overlays=new Lo(Ms.comparator),this.qr=new Map}getOverlay(t,e){return to.resolve(this.overlays.get(e))}getOverlays(t,e){const n=gc();return to.forEach(e,e=>this.getOverlay(t,e).next(t=>{null!==t&&n.set(e,t)})).next(()=>n)}saveOverlays(t,e,n){return n.forEach((n,i)=>{this.St(t,e,i)}),to.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.qr.get(n);return void 0!==i&&(i.forEach(t=>this.overlays=this.overlays.remove(t)),this.qr.delete(n)),to.resolve()}getOverlaysForCollection(t,e,n){const i=gc(),r=e.length+1,s=new Ms(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return to.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new Lo((t,e)=>t-e);const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=gc(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=gc(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((t,e)=>o.set(t,e)),!(o.size()>=i)););return to.resolve(o)}St(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new Xc(e,n));let r=this.qr.get(e);void 0===r&&(r=wc(),this.qr.set(e,r)),this.qr.set(e,r.add(n.key))}}class Tl{constructor(){this.sessionToken=Bo.EMPTY_BYTE_STRING}getSessionToken(t){return to.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,to.resolve()}}class Sl{constructor(){this.Qr=new Vo(Al.$r),this.Ur=new Vo(Al.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const n=new Al(t,e);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,e){t.forEach(t=>this.addReference(t,e))}removeReference(t,e){this.Gr(new Al(t,e))}zr(t,e){t.forEach(t=>this.removeReference(t,e))}jr(t){const e=new Ms(new Ps([])),n=new Al(e,t),i=new Al(e,t+1),r=[];return this.Ur.forEachInRange([n,i],t=>{this.Gr(t),r.push(t.key)}),r}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new Ms(new Ps([])),n=new Al(e,t),i=new Al(e,t+1);let r=wc();return this.Ur.forEachInRange([n,i],t=>{r=r.add(t.key)}),r}containsKey(t){const e=new Al(t,0),n=this.Qr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Al{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return Ms.comparator(t.key,e.key)||Ts(t.Yr,e.Yr)}static Kr(t,e){return Ts(t.Yr,e.Yr)||Ms.comparator(t.key,e.key)}}class Cl{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Vo(Al.$r)}checkEmpty(t){return to.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Qc(r,e,n,i);this.mutationQueue.push(s);for(const o of i)this.Zr=this.Zr.add(new Al(o.key,r)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return to.resolve(s)}lookupMutationBatch(t,e){return to.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.ei(n),r=i<0?0:i;return to.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return to.resolve(0===this.mutationQueue.length?ro:this.tr-1)}getAllMutationBatches(t){return to.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Al(e,0),i=new Al(e,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([n,i],t=>{const e=this.Xr(t.Yr);r.push(e)}),to.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Vo(Ts);return e.forEach(t=>{const e=new Al(t,0),i=new Al(t,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([e,i],t=>{n=n.add(t.Yr)})}),to.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;Ms.isDocumentKey(r)||(r=r.child(""));const s=new Al(new Ms(r),0);let o=new Vo(Ts);return this.Zr.forEachWhile(t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.Yr)),!0)},s),to.resolve(this.ti(o))}ti(t){const e=[];return t.forEach(t=>{const n=this.Xr(t);null!==n&&e.push(n)}),e}removeMutationBatch(t,e){ls(0===this.ni(e.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return to.forEach(e.mutations,i=>{const r=new Al(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,e){const n=new Al(e,0),i=this.Zr.firstAfterOrEqual(n);return to.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,to.resolve()}ni(t,e){return this.ei(t)}ei(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class kl{constructor(t){this.ri=t,this.docs=new Lo(Ms.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.ri(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return to.resolve(n?n.document.mutableCopy():Ea.newInvalidDocument(e))}getEntries(t,e){let n=uc();return e.forEach(t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Ea.newInvalidDocument(t))}),to.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=uc();const s=e.path,o=new Ms(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||$s(Xs(o),n)<=0||(i.has(o.key)||oc(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return to.resolve(r)}getAllFromCollectionGroup(t,e,n,i){as(9500)}ii(t,e){return to.forEach(this.docs,t=>e(t))}newChangeBuffer(t){return new Nl(this)}getSize(t){return to.resolve(this.size)}}class Nl extends wl{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?e.push(this.Nr.addEntry(t,i)):this.Nr.removeEntry(n)}),to.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}class Rl{constructor(t){this.persistence=t,this.si=new lc(t=>Wa(t),Ga),this.lastRemoteSnapshotVersion=Ws.min(),this.highestTargetId=0,this.oi=0,this._i=new Sl,this.targetCount=0,this.ai=yl.ur()}forEachTarget(t,e){return this.si.forEach((t,n)=>e(n)),to.resolve()}getLastRemoteSnapshotVersion(t){return to.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return to.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),to.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.oi&&(this.oi=e),to.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new yl(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,to.resolve()}updateTargetData(t,e){return this.Pr(e),to.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,to.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.si.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)}),to.waitFor(r).next(()=>i)}getTargetCount(t){return to.resolve(this.targetCount)}getTargetData(t,e){const n=this.si.get(e)||null;return to.resolve(n)}addMatchingKeys(t,e,n){return this._i.Wr(e,n),to.resolve()}removeMatchingKeys(t,e,n){this._i.zr(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach(e=>{r.push(i.markPotentiallyOrphaned(t,e))}),to.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),to.resolve()}getMatchingKeysForTargetId(t,e){const n=this._i.Hr(e);return to.resolve(n)}containsKey(t,e){return to.resolve(this._i.containsKey(e))}}class Ol{constructor(t,e){this.ui={},this.overlays={},this.ci=new io(0),this.li=!1,this.li=!0,this.hi=new Tl,this.referenceDelegate=t(this),this.Pi=new Rl(this),this.indexManager=new fl,this.remoteDocumentCache=function(t){return new kl(t)}(t=>this.referenceDelegate.Ti(t)),this.serializer=new hl(e),this.Ii=new Il(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new bl,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.ui[t.toKey()];return n||(n=new Cl(e,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,n){is("MemoryPersistence","Starting transaction:",t);const i=new Pl(this.ci.next());return this.referenceDelegate.Ei(),n(i).next(t=>this.referenceDelegate.di(i).next(()=>t)).toPromise().then(t=>(i.raiseOnCommittedEvent(),t))}Ai(t,e){return to.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,e)))}}class Pl extends Zs{constructor(t){super(),this.currentSequenceNumber=t}}class Dl{constructor(t){this.persistence=t,this.Ri=new Sl,this.Vi=null}static mi(t){return new Dl(t)}get fi(){if(this.Vi)return this.Vi;throw as(60996)}addReference(t,e,n){return this.Ri.addReference(n,e),this.fi.delete(n.toString()),to.resolve()}removeReference(t,e,n){return this.Ri.removeReference(n,e),this.fi.add(n.toString()),to.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),to.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach(t=>this.fi.add(t.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(t=>{t.forEach(t=>this.fi.add(t.toString()))}).next(()=>n.removeTargetData(t,e))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return to.forEach(this.fi,n=>{const i=Ms.fromPath(n);return this.gi(t,i).next(t=>{t||e.removeEntry(i,Ws.min())})}).next(()=>(this.Vi=null,e.apply(t)))}updateLimboDocument(t,e){return this.gi(t,e).next(t=>{t?this.fi.delete(e.toString()):this.fi.add(e.toString())})}Ti(t){return 0}gi(t,e){return to.or([()=>to.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class Ll{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.Es=n,this.ds=i}static As(t,e){let n=wc(),i=wc();for(const r of e.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Ll(t,e.fromCache,n,i)}}class Ml{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class xl{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=A()?8:eo(T())>0?6:4}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.ys(t,e).next(t=>{r.result=t}).next(()=>{if(!r.result)return this.ws(t,e,i,n).next(t=>{r.result=t})}).next(()=>{if(r.result)return;const n=new Ml;return this.Ss(t,e,n).next(i=>{if(r.result=i,this.Vs)return this.bs(t,e,n,i.size)})}).next(()=>r.result)}bs(t,e,n,i){return n.documentReadCount<this.fs?(ns()<=z.DEBUG&&is("QueryEngine","SDK will not create cache indexes for query:",sc(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),to.resolve()):(ns()<=z.DEBUG&&is("QueryEngine","Query:",sc(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(ns()<=z.DEBUG&&is("QueryEngine","The SDK decides to create cache indexes for query:",sc(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,tc(e))):to.resolve())}ys(t,e){if(Ya(e))return to.resolve(null);let n=tc(e);return this.indexManager.getIndexType(t,n).next(i=>0===i?null:(null!==e.limit&&1===i&&(e=nc(e,null,"F"),n=tc(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next(i=>{const r=wc(...i);return this.ps.getDocuments(t,r).next(i=>this.indexManager.getMinOffset(t,n).next(n=>{const s=this.Ds(e,i);return this.Cs(e,s,r,n.readTime)?this.ys(t,nc(e,null,"F")):this.vs(t,s,e,n)}))})))}ws(t,e,n,i){return Ya(e)||i.isEqual(Ws.min())?to.resolve(null):this.ps.getDocuments(t,n).next(r=>{const s=this.Ds(e,r);return this.Cs(e,s,n,i)?to.resolve(null):(ns()<=z.DEBUG&&is("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),sc(e)),this.vs(t,s,e,Qs(i,Gs)).next(t=>t))})}Ds(t,e){let n=new Vo(ac(t));return e.forEach((e,i)=>{oc(t,i)&&(n=n.add(i))}),n}Cs(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ss(t,e,n){return ns()<=z.DEBUG&&is("QueryEngine","Using full collection scan to execute query:",sc(e)),this.ps.getDocumentsMatchingQuery(t,e,Ys.min(),n)}vs(t,e,n,i){return this.ps.getDocumentsMatchingQuery(t,n,i).next(t=>(e.forEach(e=>{t=t.insert(e.key,e)}),t))}}const Vl="LocalStore";class Ul{constructor(t,e,n,i){this.persistence=t,this.Fs=e,this.serializer=i,this.Ms=new Lo(Ts),this.xs=new lc(t=>Wa(t),Ga),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new El(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ms))}}function Fl(t,e,n,i){return new Ul(t,e,n,i)}async function jl(t,e){const n=hs(t);return await n.persistence.runTransaction("Handle user change","readonly",t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next(r=>(i=r,n.Bs(e),n.mutationQueue.getAllMutationBatches(t))).next(e=>{const r=[],s=[];let o=wc();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next(t=>({Ls:t,removedBatchIds:r,addedBatchIds:s}))})})}class Bl{constructor(){this.activeTargetIds=Ec()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Hl{constructor(){this.Mo=new Bl,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,n){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Bl,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class ql{Oo(t){}shutdown(){}}const zl="ConnectivityMonitor";class Kl{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){is(zl,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){is(zl,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Wl=null;function Gl(){return null===Wl?Wl=268435456+Math.round(2147483648*Math.random()):Wl++,"0x"+Wl.toString(16)}const Jl="RestConnection",Ql={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Xl{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko="projects/".concat(n,"/databases/").concat(i),this.Wo=this.databaseId.database===Zo?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(i)}Go(t,e,n,i,r){const s=Gl(),o=this.zo(t,e.toUriEncodedString());is(Jl,"Sending RPC '".concat(t,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,i,r);const{host:c}=new URL(o),l=w(c);return this.Jo(t,o,a,n,l).then(e=>(is(Jl,"Received RPC '".concat(t,"' ").concat(s,": "),e),e),e=>{throw ss(Jl,"RPC '".concat(t,"' ").concat(s," failed with error: "),e,"url: ",o,"request:",n),e})}Ho(t,e,n,i,r,s){return this.Go(t,e,n,i,r)}jo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+ts,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((e,n)=>t[n]=e),n&&n.headers.forEach((e,n)=>t[n]=e)}zo(t,e){const n=Ql[t];return"".concat(this.Uo,"/v1/").concat(e,":").concat(n)}terminate(){}}class Yl{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const $l="WebChannelConnection";class Zl extends Xl{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,n,i,r){const s=Gl();return new Promise((r,o)=>{const a=new Br;a.setWithCredentials(!0),a.listenOnce(qr.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case zr.NO_ERROR:const n=a.getResponseJson();is($l,"XHR for RPC '".concat(t,"' ").concat(s," received:"),JSON.stringify(n)),r(n);break;case zr.TIMEOUT:is($l,"RPC '".concat(t,"' ").concat(s," timed out")),o(new ds(us.DEADLINE_EXCEEDED,"Request time out"));break;case zr.HTTP_ERROR:const i=a.getStatus();if(is($l,"RPC '".concat(t,"' ").concat(s," failed with status:"),i,"response text:",a.getResponseText()),i>0){var e;let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const n=null===(e=t)||void 0===e?void 0:e.error;if(n&&n.status&&n.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(us).indexOf(e)>=0?e:us.UNKNOWN}(n.status);o(new ds(t,n.message))}else o(new ds(us.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ds(us.UNAVAILABLE,"Connection failed."));break;default:as(9055,{l_:t,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{is($l,"RPC '".concat(t,"' ").concat(s," completed."))}});const c=JSON.stringify(i);is($l,"RPC '".concat(t,"' ").concat(s," sending request:"),i),a.send(e,"POST",c,n,15)})}T_(t,e,n){const i=Gl(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=Jr(),o=Gr(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const l=r.join("");is($l,"Creating RPC '".concat(t,"' stream ").concat(i,": ").concat(l),a);const h=s.createWebChannel(l,a);this.I_(h);let u=!1,d=!1;const f=new Yl({Yo:e=>{d?is($l,"Not sending because RPC '".concat(t,"' stream ").concat(i," is closed:"),e):(u||(is($l,"Opening RPC '".concat(t,"' stream ").concat(i," transport.")),h.open(),u=!0),is($l,"RPC '".concat(t,"' stream ").concat(i," sending:"),e),h.send(e))},Zo:()=>h.close()}),p=(t,e,n)=>{t.listen(e,t=>{try{n(t)}catch(t){setTimeout(()=>{throw t},0)}})};return p(h,Hr.EventType.OPEN,()=>{d||(is($l,"RPC '".concat(t,"' stream ").concat(i," transport opened.")),f.o_())}),p(h,Hr.EventType.CLOSE,()=>{d||(d=!0,is($l,"RPC '".concat(t,"' stream ").concat(i," transport closed")),f.a_(),this.E_(h))}),p(h,Hr.EventType.ERROR,e=>{d||(d=!0,ss($l,"RPC '".concat(t,"' stream ").concat(i," transport errored. Name:"),e.name,"Message:",e.message),f.a_(new ds(us.UNAVAILABLE,"The operation could not be completed")))}),p(h,Hr.EventType.MESSAGE,e=>{if(!d){var n;const r=e.data[0];ls(!!r,16349);const s=r,o=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){is($l,"RPC '".concat(t,"' stream ").concat(i," received error:"),o);const e=o.status;let n=function(t){const e=Yc[t];if(void 0!==e)return Zc(e)}(e),r=o.message;void 0===n&&(n=us.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),d=!0,f.a_(new ds(n,r)),h.close()}else is($l,"RPC '".concat(t,"' stream ").concat(i," received:"),r),f.u_(r)}}),p(o,Wr.STAT_EVENT,e=>{e.stat===Kr.PROXY?is($l,"RPC '".concat(t,"' stream ").concat(i," detected buffering proxy")):e.stat===Kr.NOPROXY&&is($l,"RPC '".concat(t,"' stream ").concat(i," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(e=>e===t)}}function th(){return"undefined"!=typeof document?document:null}function eh(t){return new tl(t,!0)}class nh{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=t,this.timerId=e,this.d_=n,this.A_=i,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,e-n);i>0&&is("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(e," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}class ih{}class rh extends ih{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ds(us.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[s,o]=r;return this.connection.Go(t,nl(e,n),i,s,o)}).catch(t=>{throw"FirebaseError"===t.name?(t.code===us.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new ds(us.UNKNOWN,t.toString())})}Ho(t,e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Ho(t,nl(e,n),i,o,a,r)}).catch(t=>{throw"FirebaseError"===t.name?(t.code===us.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new ds(us.UNKNOWN,t.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class sh{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(t.toString())),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,"Online"===t&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e="Could not reach Cloud Firestore backend. ".concat(t,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(rs(e),this.aa=!1):is("OnlineStateTracker",e)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const oh="RemoteStore";class ah{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(t=>{n.enqueueAndForget(async()=>{hh(this)&&(is(oh,"Restarting streams for network reachability change."),await async function(t){const e=hs(t);e.Ea.add(4),await lh(e),e.Ra.set("Unknown"),e.Ea.delete(4),await ch(e)}(this))})}),this.Ra=new sh(n,i)}}async function ch(t){if(hh(t))for(const e of t.da)await e(!0)}async function lh(t){for(const e of t.da)await e(!1)}function hh(t){return 0===hs(t).Ea.size}async function uh(t,e){const n=hs(t);e?(n.Ea.delete(2),await ch(n)):e||(n.Ea.add(2),await lh(n),n.Ra.set("Unknown"))}class dh{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(t=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new dh(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ds(us.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class fh{constructor(){this.queries=ph(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(t,e){const n=hs(t),i=n.queries;n.queries=ph(),i.forEach((t,n)=>{for(const i of n.Sa)i.onError(e)})}(this,new ds(us.ABORTED,"Firestore shutting down"))}}function ph(){return new lc(t=>rc(t),ic)}function gh(t){t.Ca.forEach(t=>{t.next()})}var mh,yh;(yh=mh||(mh={})).Ma="default",yh.Cache="cache";const vh="SyncEngine";class wh{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new lc(t=>rc(t),ic),this.Iu=new Map,this.Eu=new Set,this.du=new Lo(Ms.comparator),this.Au=new Map,this.Ru=new Sl,this.Vu={},this.mu=new Map,this.fu=yl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}function _h(t,e,n){const i=hs(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.Tu.forEach((n,i)=>{const r=i.view.va(e);r.snapshot&&t.push(r.snapshot)}),function(t,e){const n=hs(t);n.onlineState=e;let i=!1;n.queries.forEach((t,n)=>{for(const r of n.Sa)r.va(e)&&(i=!0)}),i&&gh(n)}(i.eventManager,e),t.length&&i.Pu.H_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Eh(t,e,n){const i=hs(t),r=[],s=[],o=[];i.Tu.isEmpty()||(i.Tu.forEach((t,a)=>{o.push(i.pu(a,e,n).then(t=>{if((t||n)&&i.isPrimaryClient){var e;const r=t?!t.fromCache:null===n||void 0===n||null===(e=n.targetChanges.get(a.targetId))||void 0===e?void 0:e.current;i.sharedClientState.updateQueryState(a.targetId,r?"current":"not-current")}if(t){r.push(t);const e=Ll.As(a.targetId,t);s.push(e)}}))}),await Promise.all(o),i.Pu.H_(r),await async function(t,e){const n=hs(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",t=>to.forEach(e,e=>to.forEach(e.Es,i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i)).next(()=>to.forEach(e.ds,i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))}catch(t){if(!no(t))throw t;is(Vl,"Failed to update sequence numbers: "+t)}for(const i of e){const t=i.targetId;if(!i.fromCache){const e=n.Ms.get(t),i=e.snapshotVersion,r=e.withLastLimboFreeSnapshotVersion(i);n.Ms=n.Ms.insert(t,r)}}}(i.localStore,s))}async function Ih(t,e){const n=hs(t);if(!n.currentUser.isEqual(e)){is(vh,"User change. New user:",e.toKey());const t=await jl(n.localStore,e);n.currentUser=e,function(t,e){t.mu.forEach(t=>{t.forEach(t=>{t.reject(new ds(us.CANCELLED,e))})}),t.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Eh(n,t.Ls)}}class bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=eh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return Fl(this.persistence,new xl,t.initialUser,this.serializer)}Cu(t){return new Ol(Dl.mi,this.serializer)}Du(t){return new Hl}async terminate(){var t,e;null!==(t=this.gcScheduler)&&void 0!==t&&t.stop(),null!==(e=this.indexBackfillerScheduler)&&void 0!==e&&e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bh.provider={build:()=>new bh};class Th{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>_h(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ih.bind(null,this.syncEngine),await uh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new fh}createDatastore(t){const e=eh(t.databaseInfo.databaseId),n=function(t){return new Zl(t)}(t.databaseInfo);return function(t,e,n,i){return new rh(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,i,r){return new ah(t,e,n,i,r)}(this.localStore,this.datastore,t.asyncQueue,t=>_h(this.syncEngine,t,0),Kl.v()?new Kl:new ql)}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new wh(t,e,n,i,r,s);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(t){const e=hs(t);is(oh,"RemoteStore shutting down."),e.Ea.add(5),await lh(e),e.Aa.shutdown(),e.Ra.set("Unknown")}(this.remoteStore),null!==(t=this.datastore)&&void 0!==t&&t.terminate(),null===(e=this.eventManager)||void 0===e||e.terminate()}}Th.provider={build:()=>new Th};function Sh(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Ah=new Map,Ch="firestore.googleapis.com",kh=!0;class Nh{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new ds(us.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ch,this.ssl=kh}else this.host=t.host,this.ssl=null!==(e=t.ssl)&&void 0!==e?e:kh;if(this.isUsingEmulator=void 0!==t.emulatorOptions,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=gl;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<vl)throw new ds(us.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,i){if(!0===e&&!0===i)throw new ds(us.INVALID_ARGUMENT,"".concat(t," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sh(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new ds(us.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (must not be NaN)"));if(t.timeoutSeconds<5)throw new ds(us.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (minimum allowed value is 5)"));if(t.timeoutSeconds>30)throw new ds(us.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Rh{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ds(us.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new ds(us.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nh(t),this._emulatorOptions=t.emulatorOptions||{},void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new gs;switch(t.type){case"firstParty":return new ws(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ds(us.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Ah.get(t);e&&(is("ComponentProvider","Removing Datastore"),Ah.delete(t),e.terminate())}(this),Promise.resolve()}}function Oh(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=js(t,Rh);const r=w(e),s=t._getSettings(),o=a(a({},s),{},{emulatorOptions:t._getEmulatorOptions()}),c="".concat(e,":").concat(n);r&&(_("https://".concat(c)),b("Firestore",!0)),s.host!==Ch&&s.host!==c&&ss("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=a(a({},s),{},{host:c,ssl:r,emulatorOptions:i});if(!O(l,o)&&(t._setSettings(l),i.mockUserToken)){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=Zr.MOCK_USER;else{var h;e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=a({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[u(JSON.stringify({alg:"none",type:"JWT"})),u(JSON.stringify(s)),""].join(".")}(i.mockUserToken,null===(h=t._app)||void 0===h?void 0:h.options.projectId);const r=i.mockUserToken.sub||i.mockUserToken.user_id;if(!r)throw new ds(us.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Zr(r)}t._authCredentials=new ms(new ps(e,n))}}class Ph{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Ph(this.firestore,t,this._query)}}class Dh{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lh(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Dh(this.firestore,t,this._key)}toJSON(){return{type:Dh._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,n){if(Hs(e,Dh._jsonSchema))return new Dh(t,n||null,new Ms(Ps.fromString(e.referencePath)))}}Dh._jsonSchemaVersion="firestore/documentReference/1.0",Dh._jsonSchema={type:Bs("string",Dh._jsonSchemaVersion),referencePath:Bs("string")};class Lh extends Ph{constructor(t,e,n){super(t,e,Xa(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Dh(this.firestore,null,new Ms(t))}withConverter(t){return new Lh(this.firestore,t,this._path)}}function Mh(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(t=U(t),xs("collection","path",e),t instanceof Rh){const n=Ps.fromString(e,...i);return Vs(n),new Lh(t,null,n)}{if(!(t instanceof Dh||t instanceof Lh))throw new ds(us.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ps.fromString(e,...i));return Vs(n),new Lh(t.firestore,null,n)}}const xh="AsyncQueue";class Vh{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nh(this,"async_queue_retry"),this._c=()=>{const t=th();t&&is(xh,"Visibility state changed to "+t.visibilityState),this.M_.w_()},this.ac=t;const e=th();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=th();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const e=new fs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!no(t))throw t;is(xh,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const e=this.ac.then(()=>(this.rc=!0,t().catch(t=>{throw this.nc=t,this.rc=!1,rs("INTERNAL UNHANDLED ERROR: ",Uh(t)),t}).then(t=>(this.rc=!1,t))));return this.ac=e,e}enqueueAfterDelay(t,e,n){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const i=dh.createAndSchedule(this,t,e,n,t=>this.hc(t));return this.tc.push(i),i}uc(){this.nc&&as(47125,{Pc:Uh(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do{t=this.ac,await t}while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((t,e)=>t.targetTimeMs-e.targetTimeMs);for(const e of this.tc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function Uh(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}class Fh extends Rh{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new Vh,this._persistenceKey=(null===i||void 0===i?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Vh(t),this._firestoreClient=void 0,await t}}}class jh{constructor(t){this._byteString=t}static fromBase64String(t){try{return new jh(Bo.fromBase64String(t))}catch(t){throw new ds(us.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new jh(Bo.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:jh._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Hs(t,jh._jsonSchema))return jh.fromBase64String(t.bytes)}}jh._jsonSchemaVersion="firestore/bytes/1.0",jh._jsonSchema={type:Bs("string",jh._jsonSchemaVersion),bytes:Bs("string")};class Bh{constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let i=0;i<e.length;++i)if(0===e[i].length)throw new ds(us.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ls(e)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Hh{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ds(us.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ds(us.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ts(this._lat,t._lat)||Ts(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hh._jsonSchemaVersion}}static fromJSON(t){if(Hs(t,Hh._jsonSchema))return new Hh(t.latitude,t.longitude)}}Hh._jsonSchemaVersion="firestore/geoPoint/1.0",Hh._jsonSchema={type:Bs("string",Hh._jsonSchemaVersion),latitude:Bs("number"),longitude:Bs("number")};class qh{constructor(t){this._values=(t||[]).map(t=>t)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}(this._values,t._values)}toJSON(){return{type:qh._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Hs(t,qh._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(t=>"number"==typeof t))return new qh(t.vectorValues);throw new ds(us.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qh._jsonSchemaVersion="firestore/vectorValue/1.0",qh._jsonSchema={type:Bs("string",qh._jsonSchemaVersion),vectorValues:Bs("object")};const zh=new RegExp("[~\\*/\\[\\]]");function Kh(t,e,n){if(e.search(zh)>=0)throw Wh("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,n);try{return new Bh(...e.split("."))._internalPath}catch(i){throw Wh("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,n)}}function Wh(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a="Function ".concat(e,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=" in field ".concat(i)),o&&(c+=" in document ".concat(r)),c+=")"),new ds(us.INVALID_ARGUMENT,a+t+c)}class Gh{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Dh(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Jh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Qh("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Jh extends Gh{data(){return super.data()}}function Qh(t,e){return"string"==typeof e?Kh(t,e):e instanceof Bh?e._internalPath:e._delegate._internalPath}class Xh{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Yh extends Gh{constructor(t,e,n,i,r,s){super(t,e,n,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const e=new $h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Qh("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ds(us.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Yh._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),t&&t.isValidDocument()&&t.isFoundDocument()?(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e):e}}Yh._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yh._jsonSchema={type:Bs("string",Yh._jsonSchemaVersion),bundleSource:Bs("string","DocumentSnapshot"),bundleName:Bs("string"),bundle:Bs("string")};class $h extends Yh{data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(t)}}class Zh{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Xh(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new $h(this._firestore,this._userDataWriter,n.key,n,new Xh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const t=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ds(us.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map(n=>{const i=new $h(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Xh(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:e++}})}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(t=>e||3!==t.type).map(e=>{const i=new $h(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Xh(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,s=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:tu(e.type),doc:i,oldIndex:r,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ds(us.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Zh._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=bs.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],n=[],i=[];return this.docs.forEach(t=>{null!==t._document&&(e.push(t._document),n.push(this._userDataWriter.convertObjectMap(t._document.data.value.mapValue.fields,"previous")),i.push(t.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function tu(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return as(61501,{type:t})}}Zh._jsonSchemaVersion="firestore/querySnapshot/1.0",Zh._jsonSchema={type:Bs("string",Zh._jsonSchemaVersion),bundleSource:Bs("string","QuerySnapshot"),bundleName:Bs("string"),bundle:Bs("string")};new WeakMap;!function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(t){ts=t}(Zt),Jt(new F("firestore",(t,n)=>{let{instanceIdentifier:i,options:r}=n;const s=t.getProvider("app").getImmediate(),o=new Fh(new ys(t.getProvider("auth-internal")),new Es(s,t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ds(us.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ta(t.options.projectId,e)}(s,i),s);return r=a({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),ne(Yr,$r,t),ne(Yr,$r,"esm2020")}();n(579);const eu="undefined"!==typeof __firebase_config?__firebase_config:void 0,nu="undefined"!==typeof __app_id?__app_id:void 0;"undefined"!==typeof __initial_auth_token&&__initial_auth_token;let iu,ru;if(eu){try{iu=JSON.parse(eu)}catch(ou){iu={}}const t=nu||"default-id";ru=e=>Mh(e,"artifacts",t,"public","data","taller_ordenes")}else iu={apiKey:"AIzaSyC8gfIHJ1yrF0BYo8eIxcc-3YWHn3jjong",authDomain:"desayunos-685c6.firebaseapp.com",projectId:"desayunos-685c6",storageBucket:"desayunos-685c6.firebasestorage.app",messagingSenderId:"1019036287793",appId:"1:1019036287793:web:125da6f4009275c491e610",measurementId:"G-RCMS88889V"},ru=t=>Mh(t,"taller-arredondo-ordenes");const su=te(iu);(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee();const e=Qt(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function(t,e){const n=Qt(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(O(n.getOptions(),null!==e&&void 0!==e?e:{}))return t;Ie(t,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:Or,persistence:[Bi,Ei,Ai]}),i=y("authTokenSyncURL");if(i&&"boolean"===typeof isSecureContext&&isSecureContext){const t=new URL(i,location.origin);if(location.origin===t.origin){const e=(r=t.toString(),async t=>{const e=t&&await t.getIdTokenResult(),n=e&&((new Date).getTime()-Date.parse(e.issuedAtTime))/1e3;if(n&&n>Mr)return;const i=null===e||void 0===e?void 0:e.token;xr!==i&&(xr=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))});!function(t,e,n){U(t).beforeAuthStateChanged(e,n)}(n,e,()=>e(n.currentUser)),function(t,e,n,i){U(t).onIdTokenChanged(e,n,i)}(n,t=>e(t))}}var r;const s=g("auth");s&&zn(n,"http://".concat(s))})(su),function(t,e){const n="object"==typeof t?t:ee(),i="string"==typeof t?t:e||Zo,r=Qt(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const t=(t=>{const e=g(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]})("firestore");t&&Oh(r,...t)}}(su)})();
//# sourceMappingURL=main.15257827.js.map